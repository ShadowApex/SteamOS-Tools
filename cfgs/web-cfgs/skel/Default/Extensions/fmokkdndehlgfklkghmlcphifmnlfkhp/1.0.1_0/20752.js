var $=(function(undefined){(function(undefined){if(!("now"in Date))
Date.now=function(){return new Date().getTime();};if(!(Array.isArray instanceof Function))
Array.isArray=function(array){return array instanceof Array;};if(!(Array.prototype.indexOf instanceof Function))
Array.prototype.indexOf=function(needle,from){if(this===undefined||this===null)throw new TypeError;for(var i=!from||from<0?0:from,l=this.length;i<l;i++)
if(this[i]===needle)return i;return-1;};if(!(Array.prototype.lastIndexOf instanceof Function))
Array.prototype.lastIndexOf=function(needle,from){if(this===undefined||this===null)throw new TypeError;for(var l=this.length,i=!from||from<0?0:(from>=l?l-1:from);i>=0;i--)
if(this[i]===needle)return i;return-1;};if(!(Array.prototype.every instanceof Function))
Array.prototype.every=function(f,context){if(this===undefined||this===null||!(f instanceof Function))throw new TypeError;for(var i=0,l=this.length;i<l;i++)
if(i in this&&!f.call(context,this[i],i,this))
return false;return true;};if(!(Array.prototype.map instanceof Function))
Array.prototype.map=function(f,context){if(this===undefined||this===null||!(f instanceof Function))throw new TypeError;for(var i=0,l=this.length,res=new Array(l);i<l;i++)
if(i in this)res[i]=f.call(context,this[i],i,this);return res;};if(!(Array.prototype.some instanceof Function))
Array.prototype.some=function(f,context){if(this===undefined||this===null||!(f instanceof Function))throw new TypeError;for(var i=0,l=this.length;i<l;i++)
if(i in this&&f.call(context,this[i],i,this))
return true;return false;};if(!(Array.prototype.filter instanceof Function))
Array.prototype.filter=function(f,context){if(this===undefined||this===null||!(f instanceof Function))throw new TypeError;for(var i=0,value,l=this.length,res=[];i<l;i++)
if(i in this&&f.call(context,value=this[i],i,this))
res.push(value);return res;};if(!(Array.prototype.forEach instanceof Function))
Array.prototype.forEach=function(f,context){if(this===undefined||this===null||!(f instanceof Function))throw new TypeError;for(var i=0,l=this.length;i<l;i++)
if(i in this)f.call(context,this[i],i,this);};if(!(Function.prototype.bind instanceof Function))
Function.prototype.bind=function(context){var boundArguments=Array.prototype.slice.call(arguments,1),boundFunction=this;return function(){return boundFunction.apply(context,boundArguments.concat(Array.prototype.slice.call(arguments,0)));};};if(!(Object.create instanceof Function))
Object.create=function(object){var f=new Function;f.prototype=object;return new f;};if(!(String.prototype.trim instanceof Function))
String.prototype.trim=function(){this.replace(/^\s+|\s+$/g,"");};if(!(String.prototype.trimLeft instanceof Function))
String.prototype.trimLeft=function(){this.replace(/^\s+/g,"");};if(!(String.prototype.trimRight instanceof Function))
String.prototype.trimLeft=function(){this.replace(/\s+$/g,"");};})();var Language=function(defaultLang,langArrays){var lang;this.negotiateLang=function(){if(navigator.systemLanguage&&langArrays[navigator.systemLanguage.split("-")[0]]){lang=navigator.systemLanguage.split("-")[0];}else if(navigator.language&&langArrays[navigator.language.split("-")[0]]){lang=navigator.language.split("-")[0];}else lang=defaultLang;return true;}
this.setLang=function(l){if(!l||!langArrays[l])return false;lang=l;return true;}
this.getLang=function(){if(!lang||!langArrays[lang])return false;return{"language":lang,"array":langArrays[lang]};}}
var language=new Language("en",{en:["Speed: ","Score: ","Press <Enter>!","Bonus hunter!","Seeker!"," Game Paused ","Combo!","Triad!","Quadz!","Fivez!","Streak!","Real gourmet!","Too close!","Great reflexes!","Legendary!","Close call!","Effects: ","H","M","L"],cs:["Rychlost: ","Skóre: ","Stiskni <Enter>!","Lovec bonusù!","Pravý hledaè!"," Hra pozastavena ","Kombo!","Trojièka!","Ètveøice!","Pìt v øadì!","Žádný nemineš!","Opravdový gurmán!","Tìsnì!","Skvìlé reflexy!","Legendární!","O chlup!","Efekty: ","V","S","N"]}),l,multi=["Over 9000!","Good!","Sweet!","Great!","Impressive!","Amazing!","Extreme!","Fantastic!","Splendid!","Marvellous!","Compelling!","Impossible!","Unstoppable!","Excellent!","Terrific!","Inexterminable!","Hornmad!","Snakeous!","Peckish!","Awesome!","Brütal!","Ravenous!","Snaketacular!","Victual-minded!","Resilient!","Breathtaking!","Snakonical!","Epic!","Grand!","Impossible!","Keep it up!","Entrancing!","Wormazing!","Invincible!","Goluptious!","Inconceivable!","Nailing that!","Mighty!","Riveting!","No Way!","Snaky!","Wait for it!","Devastating!","Superb!","Food-villain!","Rapturous!","Unattainable!","Wormaster!"];language.negotiateLang();l=language.getLang().array;Date.timezone=-new Date().getTimezoneOffset()/60;Boolean.isBoolean=function(b){return b instanceof Boolean||typeof b==="boolean";};Number.isNumber=function(n){return isNaN(n)===false&&(typeof n==="number"||n instanceof Number===true);};String.isString=function(s){return s instanceof String||typeof s==="string";};Number.prototype.times=function(f){var index=this;if(/\./.test(index)||index<=0)return;while(index-->0)f();};Boolean.prototype.xor=function(boolean){var that=this.valueOf(),bool=boolean.valueOf();return(that&&!bool)||(!that&&bool);};Boolean.prototype.bitify=function(){return this.valueOf()?1:0;};Boolean.random=function(){return!Math.round(Math.random())};Function.prototype.attach=function(){var boundFunction=this,boundArguments=Array.from(arguments);return function(){return boundFunction.apply(this,boundArguments);};};Function.prototype.partial=function(){var boundFunction=this,boundArguments=Array.from(arguments);return function(){return boundFunction.apply(this,boundArguments.concat(Array.from(arguments)));};};if(!("reverse"in String.prototype))
String.prototype.reverse=function(){return this.split("").reverse().join("");};Array.prototype.remove=function(key){this.splice(key,1);return this.length;};Array.prototype.erase=function(value){var index=this.indexOf(value);return index!==-1?this.remove(index):this.length;};Array.prototype.equals=function(array,maxDepth){if(maxDepth===0)return true;var result=true;if((array instanceof Array)&&(array.length===this.length)){for(var i=0,l=this.length;i<l;i++){if((this[i]instanceof Array)&&(array[i]instanceof Array)){result=arguments.callee.call(this[i],array[i],maxDepth?maxDepth-1:maxDepth);}else{if(array[i]!==this[i]){result=false;break;}}}}else return false;return result;};Array.prototype.random=function(){var l;return this[(l=this.length)<=1?0:Math.ceil(Math.random()*l)-1];};Array.prototype.pick=function(){var result,random,l;if((l=this.length)===1){result=this[0];this.length=0;}else{random=Math.ceil(Math.random()*l)-1;result=this[random];this.remove(random);}
return result;};String.prototype.numberOf=function(needle){var num=0,lastIndex=0;if(needle instanceof RegExp){if(!needle.global){var flags="g";if(needle.ignoreCase)flags+="i";if(needle.multiline)flags+="m";needle=new RegExp(needle.source,flags);}
return(num=this.match(needle))!==null?num.length:0;}else{if(!String.isString(needle))
needle=needle.toString();while((lastIndex=this.indexOf(needle,lastIndex)+1)>0)
num++;return num;}};Array.prototype.last=function(){return this[this.length-1];};Array.prototype.empty=function(){this.length=0;};Array.prototype.include=function(item){return!this.contains(item)?this.push(item):this.length;};Array.prototype.combine=function(array){var thisGreater=this.length>array.length,base=(thisGreater?this:array).copy(),added=thisGreater?array:this;added.forEach(function(item){if(!(base.contains(item)))base.push(item);});return base;};Array.prototype.associate=function(values){if(!Array.isArray(values))throw new TypeError;var obj={};this.forEach(function(name,index){obj[name]=values[index];});return obj;};Array.prototype.numberOf=function(needle){var num=0,index=0,string=this,stringLength=string.length;if(needle instanceof RegExp){while(index=string.search(needle)+1){string=string.slice(index);num++;}}else{while(index=this.indexOf(needle,index)+1)num++;}return num;};Array.prototype.copy=function(){return this.slice(0);};Array.prototype.clean=function(){var i=0,l=this.length;while(i<l){if(this[i]===undefined){this.remove}}};Array.from=function(enumerable){return Array.isArray(enumerable)?enumerable:Array.prototype.slice.call(enumerable);};String.prototype.contains=function(needle){return needle instanceof RegExp?needle.test(this):this.indexOf(needle)!==-1;};Array.prototype.contains=function(needle){return this[needle instanceof RegExp?"search":"indexOf"](needle)!==-1;};Array.prototype.gather=String.prototype.gather=function(needle){var indexes=[],lastIndex=0,realIndex=0,string=this,stringLength=string.length;if(needle instanceof RegExp){while((realIndex=string.search(needle))!==-1&&(lastIndex=realIndex+lastIndex)!==stringLength){indexes.push(lastIndex++);string=string.slice(realIndex+1);}}else{while((lastIndex=this.indexOf(needle,lastIndex))!==-1){indexes.push(lastIndex++);}}return indexes;};Array.prototype.search=function(needle){if(!(needle instanceof RegExp))return this.indexOf(needle);var index=-1;this.every(function(content,i){if(needle.test(content)){index=i;return false;}return true;});return index;};Object.forEach=function(object,callback){if(!(object instanceof Object))return object;for(var i in object){if(callback.call(object,object[i],i)===false)return false;}
return object;};var TRANSIT=0,SOLID=1,OVERFLOW=2,EMPTY=0,PARTIALLY_FILLED=1,FILLED=2,NONE=0,DIRECTIONPICKING=1;function Snake(field,opts){if(this===window||!(field instanceof gameField)||!(opts instanceof Object)||opts.head===undefined||opts.body===undefined||opts.length<=0||(opts.position instanceof Array)===false||opts.direction>DOWN||opts.direction<LEFT)return;var that=this;this.head=opts.head;this.body=opts.body;this.length=opts.length;this.AI=opts.automation;this.callbacks=opts.callbacks instanceof Object?opts.callbacks:{};if(this.AI.movement.lifeTimeManager instanceof lifeTimeManager||this.AI.drawStars){var formerDeathCallback=this.callbacks.death;this.callbacks.death=function(){if(formerDeathCallback instanceof Function){if(formerDeathCallback.call(that)!==false)
that.destroy();}else that.destroy();}}
else this.callbacks={};if(opts.collision instanceof Object)
this.collision=opts.collision;this.position=opts.position;this.direction=opts.direction;this.history=[];this.lastCell=[];this.alive=true;this._={newDirection:false,findPathCache:{empty:function(){if(this.status!==EMPTY){this.status=EMPTY;this.queue.length=0;this.array=null;this.arrayLength.length=0;this.arrayLengthPending.length=0;this.arrayLengthChanges.length=0;}},status:EMPTY,queue:[],array:null,arrayLength:[],arrayLengthPending:[],arrayLengthChanges:[]},follow:false,moveScripts:{move:{callback:function(){this.move(true);},context:this},preMove:{callback:this.preMove,context:this}},length:undefined};if(this.AI.autoSpawn===true)
this.spawn();this.constructor.instances.push(this);}
Snake.cleanCache=function(){this.instances.forEach(function(instance){instance._.findPathCache.empty.call(instance._.findPathCache);});}
Snake.instances=[];Snake.prototype.collision={walls:SOLID,body:true,items:true};Snake.prototype.isLastCell=function(position){return(this._.length===this.length&&position[0]===this.lastCell[0]&&position[1]===this.lastCell[1]);};Snake.prototype.spawn=function(){this.history.length=0;var x=this.position[0],y=this.position[1],that=this,snakeLength=this.length;if(field.get(x,y)===food)spawn(food);field.spawn(x,y,this.head,this.length);for(var count=0;count<snakeLength;){switch(this.direction){case LEFT:x++;break;case UP:y++;break;case RIGHT:x--;break;case DOWN:y--;}
if(field.get(x,y)===food)spawn(food);field.spawn(x,y,this.body,this.length-1-count);this.history[count]=[x,y];if(++count===snakeLength){this.lastCell[0]=x;this.lastCell[1]=y;}}
this._.length=this.length;if(this.AI.movement.lifeTimeManager instanceof lifeTimeManager){field.movement.addCallback(this._.moveScripts.move);if(this.AI.movement.pursue.method!==NONE||this._.follow!==false)
field.movement.addFCCallback(this._.moveScripts.preMove);}};Snake.prototype.destroy=function(silent){if(this.AI.movement.lifeTimeManager instanceof lifeTimeManager){field.movement.removeCallback(this._.moveScripts.move);if(this.AI.movement.pursue.method!==NONE||this._.follow!==false)
field.movement.removeFCCallback(this._.moveScripts.preMove);}
if(this.AI.drawStars===true)
drawStars(this.position);this.alive=false;this.constructor.instances.removeByValue(this);if(this.callbacks.afterDeath instanceof Function&&!silent)
this.callbacks.afterDeath.call(this);};Snake.prototype.changeDirection=function(direction){if(this.direction===LEFT&&direction!==LEFT&&direction!==RIGHT)
this._.newDirection=direction;else if(this.direction===UP&&direction!==UP&&direction!==DOWN)
this._.newDirection=direction;else if(this.direction===RIGHT&&direction!==RIGHT&&direction!==LEFT)
this._.newDirection=direction;else if(this.direction===DOWN&&direction!==DOWN&&direction!==UP)
this._.newDirection=direction;}
Snake.prototype.preMove=function(){if(this.AI.movement.pursue.method!==NONE){switch(this.AI.movement.pursue.method){case DIRECTIONPICKING:if(this._.follow===false)
this.pickDirection();break;}}
if(this._.follow!==false){var shift=this._.follow.shift();this.changeDirection(this.getDirection(shift));if(this._.follow.length===0){this._.follow=false;if(this.AI.movement.pursue.method===NONE)
field.movement.removeFCCallback(this._.moveScripts.preMove);}}}
Snake.prototype.move=function(callback){if(this._.newDirection!==false){if(this.callbacks.directionChange instanceof Function)
this.callbacks.directionChange.call(this,this._.newDirection);this.direction=this._.newDirection;this._.newDirection=false;}
var position=this.getPosition(this.direction),x=position[0],y=position[1],that=this;var get=field.get(x,y),last=get!==false?this.isLastCell(position):false;if((last===false||(this.callbacks.tailMiss instanceof Function&&this.getVector(this.history[this.history.length-1],this.history[this.history.length-2])!==this.direction?this.callbacks.tailMiss.call(this):false))&&get===this.body&&this.collision.body===true)
this.callbacks.death();else if(last===false&&get!==false&&get!==this.body&&this.collision.items===true){if(field.collisionList.indexOf(get)!==-1){this.callbacks.death();}else if(this.callbacks.collision instanceof Function){this.callbacks.collision.call(this,x,y,get);}}else if((x<0||x>=width||y<0||y>=height)&&this.collision.walls===SOLID)
this.callbacks.death();else{this._.findPathCache.empty.call(this._.findPathCache);var increaseSize=this._.length!==this.length;if(increaseSize){this._.length++;if(this.callbacks.lengthChange instanceof Function)
this.callbacks.lengthChange.call(this,this._.length);}
this.history.unshift(this.position.slice(0));if(this.collision.body===true){field.spawn(x,y,this.head,this.length);if(this.position[0]>=0&&this.position[0]<width&&this.position[1]>=0&&this.position[1]<height)
field.spawn(this.position[0],this.position[1],this.body);if(increaseSize===false&&!(this.history[this.history.length-1][0]===x&&this.history[this.history.length-1][1]===y))field.remove(this.history[this.history.length-1][0],this.history[this.history.length-1][1]);if(increaseSize===true&&this.AI.movement.lifeTimeManager.get(this.history[0],this.history[1])!==this.length-1){this.history.forEach(function(position,index){that.AI.movement.lifeTimeManager.set(position[0],position[1],that.length-index-1);});}}
this.position[0]=x;this.position[1]=y;if(this.collision.body!==true){this.history.each(function(history,index){if(history[0]>=0&&history[0]<width&&history[1]>=0&&history[1]<height){if(index<that.history.length-1)
field.spawn(history[0],history[1],that.body,that.length-index-1);else if(increaseSize===false)
field.remove(history[0],history[1]);else if(that.AI.movement.lifeTimeManager.get(that.history[0],that.history[1])!==that.length-1)
that.AI.movement.lifeTimeManager.set(history[0],history[1],that.length-index-1)}},this.history.length-1,0);}
if(increaseSize===false)
this.history.pop();this.lastCell[0]=this.history[this.history.length-1][0];this.lastCell[1]=this.history[this.history.length-1][1];if(this.collision.body===false)
field.spawn(x,y,this.head,this.length);if(callback===true&&this.callbacks.move instanceof Function)
this.callbacks.move.call(this);}};Snake.prototype.pickDirection=function(){var direction={score:[],position:[],mask:[]},ray;for(var dir=LEFT;dir<=DOWN;dir++){if((dir===LEFT&&this.direction!==RIGHT)||(dir===UP&&this.direction!==DOWN)||(dir===RIGHT&&this.direction!==LEFT)||(dir===DOWN&&this.direction!==UP)){direction.position.push(this.getPosition(dir));direction.score.push((collisionList.indexOf(field.get(direction.position[direction.position.length-1][0],direction.position[direction.position.length-1][1]))!==-1&&this.AI.movement.lifeTimeManager.get(direction.position[direction.position.length-1][0],direction.position[direction.position.length-1][1])!==0)||direction.position[direction.position.length-1][0]<0||direction.position[direction.position.length-1][0]>=width||direction.position[direction.position.length-1][1]<0||direction.position[direction.position.length-1][1]>=height?-Infinity:0);direction.mask.push(dir);}}
for(dir=0;dir<3;dir++){if(direction.score[dir]===-Infinity)continue;if(collisionList.indexOf(field.get.apply(field,this.getPosition(direction.mask[dir]===LEFT||direction.mask[dir]===RIGHT?UP:LEFT,direction.position[dir])))!==-1&&collisionList.indexOf(field.get.apply(field,this.getPosition(direction.mask[dir]===LEFT||direction.mask[dir]===RIGHT?DOWN:RIGHT,direction.position[dir])))!==-1){direction.score[dir]=-Number.MAX_VALUE;continue;}
ray=this.castRay(direction.mask[dir])[0];direction.score[dir]-=calcDistance(direction.position[dir],this.getPoint(),this.collision.walls!==TRANSIT);direction.score[dir]-=ray<(direction.mask[dir]===LEFT||direction.mask[dir]===RIGHT?width:height)*0.25?(1-ray/((direction.mask[dir]===LEFT||direction.mask[dir]===RIGHT?width:height))*0.25)*((width+height)*(this.collision.walls===TRANSIT?0.5:1)):0;}
dir=direction.score.maxArray().random();this.changeDirection(direction.mask[dir]);};Snake.prototype.getPosition=function(direction,position){var x=position instanceof Array?position[0]:this.position[0],y=position instanceof Array?position[1]:this.position[1];switch(direction){case LEFT:x--;break;case UP:y--;break;case RIGHT:x++;break;case DOWN:y++;break;}
if(this.collision.walls===TRANSIT){if(x<0)x=width-1;else if(x>=width)x=0;if(y<0)y=height-1;else if(y>=height)y=0;}
return[x,y];};Snake.prototype.getVector=function(){var position=arguments;if(this.collision.walls===TRANSIT){if(position[0][0]===0&&position[1][0]===width-1&&position[0][1]===position[1][1])return LEFT;if(position[0][0]===position[1][0]&&position[0][1]===0&&position[1][1]===height-1)return UP;if(position[0][0]===width-1&&position[1][0]===0&&position[0][1]===position[1][1])return RIGHT;if(position[0][0]===position[1][0]&&position[0][1]===height-1&&position[1][1]===0)return DOWN;}
if(position[0][0]>position[1][0]&&position[0][1]===position[1][1])return LEFT;if(position[0][0]===position[1][0]&&position[0][1]>position[1][1])return UP;if(position[0][0]<position[1][0]&&position[0][1]===position[1][1])return RIGHT;if(position[0][0]===position[1][0]&&position[0][1]<position[1][1])return DOWN;return-1;}
Snake.prototype.getDirection=function(position,originalPosition){var x=position[0],y=position[1],_x=originalPosition instanceof Array?originalPosition[0]:this.position[0],_y=originalPosition instanceof Array?originalPosition[1]:this.position[1],collision=this.collision.walls!==TRANSIT;originalPosition=originalPosition||this.position;if(x===_x-1&&y===_y)return LEFT;if(x===_x&&y===_y-1)return UP;if(x===_x+1&&y===_y)return RIGHT;if(x===_x&&y===_y+1)return DOWN;if(collision===false){if(x===width-1&&_x===0&&y===_y)return LEFT;if(x===_x&&y===height-1&&_y===0)return UP;if(x===0&&_x===width-1&&y===_y)return RIGHT;if(x===_x&&y===0&&_y===height-1)return DOWN;}
return-1;};Snake.prototype.castRay=function(direction){if(direction===undefined)
direction=this.direction;var currPosition=this.position,startPosition=this.position,rayLength=0;while((currPosition=this.getPosition(direction,currPosition))&&(collisionList.indexOf(field.get(currPosition[0],currPosition[1]))===-1||this.AI.movement.lifeTimeManager.get(currPosition[0],currPosition[1])<=rayLength)&&currPosition[0]>=0&&currPosition[0]<width&&currPosition[1]>=0&&currPosition[1]<height&&(currPosition[0]===startPosition[0]&&currPosition[1]===startPosition[1])===false){rayLength++;}
return(currPosition[0]===startPosition[0]&&currPosition[1]===startPosition[1])===false?[rayLength,currPosition]:[Infinity,startPosition]};Snake.prototype.find=function(destination){if(!this.alive||destination instanceof Array&&((destination[0]===this.position[0]&&destination[1]===this.position[1])||(destination[0]>=width||destination[0]<0||destination[1]>=height||destination[1]<0)))
return[];if(destination instanceof Array)
destination=[destination[0],destination[1]];else if(destination===undefined)
destination=true;var depth=0,cache=this._.findPathCache,accessSearch=Boolean.isBoolean(destination),array=cache.status===EMPTY?(cache.array=this.AI.movement.lifeTimeManager.getArray()):cache.array,arrayLength=cache.arrayLength,arrayLengthPending=cache.arrayLengthPending,arrayLengthChanges=cache.arrayLengthChanges,currLoc=this.position,currPos,originalLength=this.length,queue=cache.status===EMPTY?(cache.queue=[currLoc,true]):cache.queue,temp=[],result=[],from,get=function(direction,collision,queue){var newPosition=this.getPosition(direction,queue[0]);if(collision===true){if(array[newPosition[0]][newPosition[1]]<array[queue[0][0]][queue[0][1]]&&(array[newPosition[0]][newPosition[1]]===0||(array[queue[0][0]][queue[0][1]]-array[newPosition[0]][newPosition[1]]>(queue[0][0]in arrayLength&&queue[0][1]in arrayLength[queue[0][0]]?arrayLength[queue[0][0]][queue[0][1]]:originalLength)
+((queue[0][0]in arrayLength&&queue[0][1]in arrayLength[queue[0][0]]?arrayLength[queue[0][0]][queue[0][1]]:originalLength)
-(newPosition[0]in arrayLength&&newPosition[1]in arrayLength[newPosition[0]]?arrayLength[newPosition[0]][newPosition[1]]:originalLength))+(arrayLengthPending[queue[0][0]]instanceof Array===true&&Number.isNumber(arrayLengthPending[queue[0][0]][queue[0][1]])?(arrayLengthPending[queue[0][0]][queue[0][1]]>0?1:0):0)&&array[newPosition[0]][newPosition[1]]<=originalLength))){return newPosition[0]>=0&&newPosition[0]<width&&newPosition[1]>=0&&newPosition[1]<height?newPosition:false;}else return false;}else{return newPosition[0]>=0&&newPosition[0]<width&&newPosition[1]>=0&&newPosition[1]<height?newPosition:false;}},move=function(currPos,destination){var bonus=foodBonuses[field.get(destination[0],destination[1])],pending=arrayLengthPending[currPos[0]]instanceof Array&&Number.isNumber(arrayLengthPending[currPos[0]][currPos[1]])?arrayLengthPending[currPos[0]][currPos[1]]:0;if(bonus!==undefined){if(arrayLengthChanges[destination[0]]instanceof Array===false)
arrayLengthChanges[destination[0]]=[];arrayLengthChanges[destination[0]][destination[1]]=bonus;}
array[destination[0]][destination[1]]=array[currPos[0]][currPos[1]]+1;if(!(destination[0]in arrayLength))
arrayLength[destination[0]]=[];arrayLength[destination[0]][destination[1]]=bonus===undefined?(currPos[0]in arrayLength&&currPos[1]in arrayLength[currPos[0]]?arrayLength[currPos[0]][currPos[1]]:originalLength)
+(pending>0?1:0):(currPos[0]in arrayLength&&currPos[1]in arrayLength[currPos[0]]?arrayLength[currPos[0]][currPos[1]]:originalLength)
+(pending+bonus*lengthMultiplier>1?1:bonus*lengthMultiplier);if(((bonus!==undefined&&(bonus*lengthMultiplier>1))||pending!==0)&&pending+(bonus||0)*lengthMultiplier-1>0){if(arrayLengthPending[destination[0]]instanceof Array===false)
arrayLengthPending[destination[0]]=[];arrayLengthPending[destination[0]][destination[1]]=pending+(bonus||0)*lengthMultiplier-1;}},fill=function(record){while(queue.length>0){currPos=queue[0].slice(0);temp[0]=get.call(this,LEFT,true,queue);temp[1]=get.call(this,UP,true,queue);temp[2]=get.call(this,RIGHT,true,queue);temp[3]=get.call(this,DOWN,true,queue);if(accessSearch===false&&((temp[0]instanceof Array&&temp[0][0]===destination[0]&&temp[0][1]===destination[1])||(temp[1]instanceof Array&&temp[1][0]===destination[0]&&temp[1][1]===destination[1])||(temp[2]instanceof Array&&temp[2][0]===destination[0]&&temp[2][1]===destination[1])||(temp[3]instanceof Array&&temp[3][0]===destination[0]&&temp[3][1]===destination[1]))){move(currPos,destination);break;}
temp.forEach(function(a){if(a!==false){move(currPos,a);queue.push(a);}});queue.shift();if(queue[0]===true){depth++;queue.shift();if(queue.length>0)queue.push(true);}}
if(record===true){if(queue.length===0){if(cache.status!==FILLED)
cache.status=FILLED;}else if(cache.status!==PARTIALLY_FILLED)
cache.status=PARTIALLY_FILLED;}},scour=function(){if(array[destination[0]][destination[1]]<=originalLength)
return false;var positions=[this.getPosition(LEFT,destination),this.getPosition(UP,destination),this.getPosition(RIGHT,destination),this.getPosition(DOWN,destination)],score=[array[positions[0][0]]?array[positions[0][0]][positions[0][1]]:undefined,array[positions[1][0]]?array[positions[1][0]][positions[1][1]]:undefined,array[positions[2][0]]?array[positions[2][0]][positions[2][1]]:undefined,array[positions[3][0]]?array[positions[3][0]][positions[3][1]]:undefined],result=score.indexOf(array[destination[0]][destination[1]]-1);return result===-1?false:positions[result];},find=function(){if(from instanceof Array===false)
return;if(from[0]===currLoc[0]&&from[1]===currLoc[1]){result[0]=destination;return;}
result[0]=from;result[1]=destination;result.forEach(function(a){if(arrayLengthChanges[a[0]]instanceof Array&&Number.isNumber(arrayLengthChanges[a[0]][a[1]]))
a[2]=arrayLengthChanges[a[0]][a[1]];});temp.length=0;if(result[0][0]===currLoc[0]&&result[0][1]===currLoc[1]){return result.slice(1);}else{while(true){temp[0]=get.call(this,LEFT,false,result);temp[1]=get.call(this,UP,false,result);temp[2]=get.call(this,RIGHT,false,result);temp[3]=get.call(this,DOWN,false,result);if((temp[0]instanceof Array&&temp[0][0]===currLoc[0]&&temp[0][1]===currLoc[1]&&array[result[0][0]][result[0][1]]<=((temp[1]instanceof Array?array[temp[1][0]][temp[1][1]]:-Infinity)>originalLength?array[temp[1][0]][temp[1][1]]:Infinity)&&array[result[0][0]][result[0][1]]<=((temp[2]instanceof Array?array[temp[2][0]][temp[2][1]]:-Infinity)>originalLength?array[temp[2][0]][temp[2][1]]:Infinity)&&array[result[0][0]][result[0][1]]<=((temp[3]instanceof Array?array[temp[3][0]][temp[3][1]]:-Infinity)>originalLength?array[temp[3][0]][temp[3][1]]:Infinity))||(temp[1]instanceof Array&&temp[1][0]===currLoc[0]&&temp[1][1]===currLoc[1]&&array[result[0][0]][result[0][1]]<=((temp[0]instanceof Array?array[temp[0][0]][temp[0][1]]:-Infinity)>originalLength?array[temp[0][0]][temp[0][1]]:Infinity)&&array[result[0][0]][result[0][1]]<=((temp[2]instanceof Array?array[temp[2][0]][temp[2][1]]:-Infinity)>originalLength?array[temp[2][0]][temp[2][1]]:Infinity)&&array[result[0][0]][result[0][1]]<=((temp[3]instanceof Array?array[temp[3][0]][temp[3][1]]:-Infinity)>originalLength?array[temp[3][0]][temp[3][1]]:Infinity))||(temp[2]instanceof Array&&temp[2][0]===currLoc[0]&&temp[2][1]===currLoc[1]&&array[result[0][0]][result[0][1]]<=((temp[0]instanceof Array?array[temp[0][0]][temp[0][1]]:-Infinity)>originalLength?array[temp[0][0]][temp[0][1]]:Infinity)&&array[result[0][0]][result[0][1]]<=((temp[1]instanceof Array?array[temp[1][0]][temp[1][1]]:-Infinity)>originalLength?array[temp[1][0]][temp[1][1]]:Infinity)&&array[result[0][0]][result[0][1]]<=((temp[3]instanceof Array?array[temp[3][0]][temp[3][1]]:-Infinity)>originalLength?array[temp[3][0]][temp[3][1]]:Infinity))||(temp[3]instanceof Array&&temp[3][0]===currLoc[0]&&temp[3][1]===currLoc[1]&&array[result[0][0]][result[0][1]]<=((temp[0]instanceof Array?array[temp[0][0]][temp[0][1]]:-Infinity)>originalLength?array[temp[0][0]][temp[0][1]]:Infinity)&&array[result[0][0]][result[0][1]]<=((temp[1]instanceof Array?array[temp[1][0]][temp[1][1]]:-Infinity)>originalLength?array[temp[1][0]][temp[1][1]]:Infinity)&&array[result[0][0]][result[0][1]]<=((temp[2]instanceof Array?array[temp[2][0]][temp[2][1]]:-Infinity)>originalLength?array[temp[2][0]][temp[2][1]]:Infinity)))
break;temp.forEach(function(a,index){if(a!==false&&array[a[0]][a[1]]===array[result[0][0]][result[0][1]]-1){if(arrayLengthChanges[a[0]]instanceof Array&&Number.isNumber(arrayLengthChanges[a[0]][a[1]])){a[2]=arrayLengthChanges[a[0]][a[1]][1];}
result.unshift(a);return false;}});}}}
if(cache.status===EMPTY){fill.call(this,true);from=queue[0];}else if(cache.status===PARTIALLY_FILLED){if(accessSearch===false){if((from=scour.call(this))===false){fill.call(this,true);from=queue[0];}}else fill.call(this,true);}else if(accessSearch===false){from=scour.call(this);find.call(this);}
if(queue.length===0){if(accessSearch===true){array.forEach(function(column,x){column.forEach(function(cell,y){if(((destination&&cell>0)||(!destination&&cell===0))&&field.get(x,y)===false)
result.push([x,y,destination?cell-originalLength:calcDistance(Ego.position,[x,y],that.collision.walls===SOLID)]);});});}}else find.call(this);return result;};Snake.prototype.follow=function(passedPath){if(passedPath.length>0){this._.follow=passedPath;if(this.AI.movement.pursue.method===NONE)
field.movement.addFCCallback(this._.moveScripts.preMove);}};Snake.prototype.getPoint=function(){var point,that=this;this.AI.movement.pursue.point.forEach(function(f){if((point=f.call(that))instanceof Array)return false;});return point;};var Screen=(function(){var loadQueue=[],resizeQueue=[],scrollQueue=[],attachListener=window.addEventListener?addEventListener:attachEvent,detachListener=window.removeEventListener?removeEventListener:detachEvent,libraryBody=function(){that.loaded=true;var body=document.body||document.getElementsByTagName("body")[0],html=document.documentElement||document.getElementsByTagName("html")[0],getClosest=function(key,valueOne,valueTwo){var abs=[Math.abs(key-valueOne),Math.abs(key-valueTwo)];return abs.indexOf(Math.min.apply(Math,abs));},getFarthest=function(key,valueOne,valueTwo){var abs=[Math.abs(key-valueOne),Math.abs(key-valueTwo)];return abs.indexOf(Math.max.apply(Math,abs));},newThread=function(f){setTimeout(f,0);},baseElements={viewport:"innerWidth"in window&&"innerHeight"in window?window:[getClosest(screen.availWidth,html.clientWidth,body.clientWidth)?body:html,getClosest(screen.availHeight,html.clientHeight,body.clientHeight)?body:html],content:[getFarthest(screen.availWidth,html.scrollWidth,body.scrollWidth)?body:html,getFarthest(screen.availHeight,html.scrollHeight,body.scrollHeight)?body:html]};Screen.clientDimensions=[baseElements.viewport===window?window.innerWidth:baseElements.viewport[0].clientWidth,baseElements.viewport===window?window.innerHeight:baseElements.viewport[1].clientHeight];Screen.contentDimensions=[baseElements.content[0].scrollWidth,baseElements.content[1].scrollHeight];Screen.scrolledContent=[html.scrollLeft>0?html.scrollLeft:body.scrollLeft,html.scrollTop>0?html.scrollTop:body.scrollTop];Screen.now=function(invokedByUser){var resized=false,scrolled=false,formerSizeValues={clientDimensions:Screen.clientDimensions.slice(0),contentDimensions:Screen.contentDimensions.slice(0)},formerScrolledContent=Screen.scrolledContent.slice(0);if(Screen.clientDimensions[0]!==(Screen.clientDimensions[0]=baseElements.viewport===window?window.innerWidth:baseElements.viewport[0].clientWidth))
resized=true;if(Screen.clientDimensions[1]!==(Screen.clientDimensions[1]=baseElements.viewport===window?window.innerHeight:baseElements.viewport[1].clientHeight)&&!resized)
resized=true;if(Screen.contentDimensions[0]!==(Screen.contentDimensions[0]=baseElements.content[0].scrollWidth)&&!resized)
resized=true;if(Screen.contentDimensions[1]!==(Screen.contentDimensions[1]=baseElements.content[1].scrollHeight)&&!resized)
resized=true;if(Screen.scrolledContent[0]!==(Screen.scrolledContent[0]=html.scrollLeft>0?html.scrollLeft:body.scrollLeft)&&!scrolled)
scrolled=true;if(Screen.scrolledContent[1]!==(Screen.scrolledContent[1]=html.scrollTop>0?html.scrollTop:body.scrollTop)&&!scrolled)
scrolled=true;if(resized){if(Screen.onresize instanceof Function)newThread(function(){Screen.onresize(formerSizeValues,!invokedByUser);});resizeQueue.forEach(function(field){newThread(function(){field(formerSizeValues,!invokedByUser);});});}
if(scrolled){if(Screen.onscroll instanceof Function)newThread(function(){Screen.onscroll(formerScrolledContent,!invokedByUser);});scrollQueue.forEach(function(field){newThread(function(){field(formerScrolledContent,!invokedByUser);});})}
return scrolled||resized;}
attachListener((window.addEventListener?"":"on")+"scroll",function(){if(Screen.onscroll instanceof Function||scrollQueue.length)
var formerScrolledContent=Screen.scrolledContent.slice(0);Screen.scrolledContent[0]=html.scrollLeft>0?html.scrollLeft:body.scrollLeft;Screen.scrolledContent[1]=html.scrollTop>0?html.scrollTop:body.scrollTop;if(Screen.onscroll instanceof Function)newThread(function(){Screen.onscroll(formerScrolledContent,false);});scrollQueue.forEach(function(field){newThread(function(){field(formerScrolledContent,false);});});},false);attachListener((window.addEventListener?"":"on")+"resize",function(){Screen.now(true);},false);if(Screen.onload instanceof Function){Screen.onload();delete Screen.onload;}
loadQueue.forEach(function(func){newThread(func);});},that;attachListener((window.addEventListener?"":"on")+"load",libraryBody,false);return(that={loaded:false,DOMLoaded:function(){if(!that.loaded){detachListener((window.removeEventListener?"":"on")+"load",libraryBody,false);libraryBody();}},addEventListener:function(name,listener){switch(name){case"load":if(!that.loaded)loadQueue.push(listener);return!that.loaded;case"resize":resizeQueue.push(listener);return true;case"scroll":scrollQueue.push(listener);return true;default:return false;}},removeEventListener:function(name,listener){var array=(function(){switch(name){case"load":return loadQueue;case"resize":resizeQueue;case"scroll":scrollQueue;default:return false;}})(),success=false;if(!array)return false;array.forEach(function(field,index){if(field===listener){array.remove(index);success=true;}});return success;},attachEvent:function(name,listener){switch(name){case"onload":if(!that.loaded)loadQueue.push(listener);return!that.loaded;case"onresize":resizeQueue.push(listener);return true;case"onscroll":scrollQueue.push(listener);return true;default:return false;}},detachEvent:function(name,listener){var array=(function(){switch(name){case"onload":return loadQueue;case"onresize":resizeQueue;case"onscroll":scrollQueue;default:return false;}})(),success=false;if(!array)return false;array.forEach(function(field,index){if(field===listener){array.remove(index);success=true;}});return success;}});})();function Listener(keyCodes,callOnUnknown,callback){var preventDefault=function(e){e=e||event;return(e.returnValue=false);},listen=Array.isArray(keyCodes)?function(e){e=e||event;var keyCode=e.which||e.keyCode;if(!keyCodes.some(function(subArray,i){if((subArray instanceof Array&&subArray.indexOf(keyCode)!==-1)||subArray===keyCode){callback(i);return true;}})&&callOnUnknown)callback(-1);}:function(e){e=e||event;if(keyCodes!==(e.which||e.keyCode)){if(callOnUnknown)callback(-1);}else callback();};this.startListening=function(){addListener("keydown",listen);addListener("contextmenu",preventDefault);};this.stopListening=function(){remListener("keydown",listen);remListener("contextmenu",preventDefault);};}
function PressAndRelease(keyCodes,cDown,cUp){var down,up,pressed;if(Array.isArray(keyCodes)){pressed=new Array(keyCodes.length);down=function(e){e=e||event;var keyCode=e.which||e.keyCode;keyCodes.some(function(subArray,i){if(((subArray instanceof Array&&subArray.indexOf(keyCode)!==-1)||subArray===keyCode)&&!pressed[i]){pressed[i]=true;cDown(i);return true;}});};up=function(e){e=e||event;var keyCode=e.which||e.keyCode;keyCodes.some(function(subArray,i){if(((subArray instanceof Array&&subArray.indexOf(keyCode)!==-1)||subArray===keyCode)&&pressed[i]){pressed[i]=false;cUp(i);return true;}});};this.stopListening=function(){pressed=new Array(keyCodes.length);remListener("keydown",down);remListener("keyup",up);};}else{pressed=false;down=function(e){e=e||event;if(keyCodes===(e.which||e.keyCode)&&!pressed){pressed=true;cDown();}};up=function(e){e=e||event;if(keyCodes===(e.which||e.keyCode)&&pressed){pressed=false;cUp();}};this.stopListening=function(){pressed=false;remListener("keydown",down);remListener("keyup",up);};}
this.startListening=function(){addListener("keydown",down);addListener("keyup",up);};};var up=[38,87,104],down=[40,83,98,101],left=[37,65,100],right=[39,68,102],pause=[19,80,32,27],enter=13;var cookie=(navigator.cookieEnabled&&(function(){var text=Date.now?Date.now():new Date().getTime(),current=new Date(),expired=new Date();current.setTime(text+3155692597470);current=current.toUTCString();expired.setTime(text-1);expired=expired.toUTCString();document.cookie=text+"="+text+";expires="+current+";domain="+location.hostname+";path=/";var returnValue=!!document.cookie.match('(^|;) ?'+text+'=([^;]*)(;|$)');document.cookie=text+"="+text+";expires="+expired+";domain="+location.hostname+";path=/";return returnValue;})())?(function(){var text=Date.now?Date.now():new Date().getTime(),current=new Date(),expired=new Date(),loaded={},length=0;current.setTime(text+3155692597470);current=current.toUTCString();expired.setTime(text-1);expired=expired.toUTCString();return{save:function(name,data){document.cookie=name+"="+data+";expires="+current+";domain="+location.hostname+";path=/";if(!(name in cookie.load))
cookie.length++;cookie.load[name]=data;return!!document.cookie.match('(^|;) ?'+name+'=([^;]*)(;|$)');},erase:function(name){if(!(name in cookie.load))return false;document.cookie=name+"="+name+";expires="+expired+";domain="+location.hostname+";path=/";delete cookie.load[name];cookie.length--;return!document.cookie.match('(^|;) ?'+name+'=([^;]*)(;|$)');},load:(function(){var split=document.cookie.split(";"),processing;for(var i=0,l=split.length;i<l;i++){processing=split[i].split("=");loaded[processing[0]]=processing[1];length++;}
return loaded;})(),length:length}})():false;var userData=((document.documentElement||document.getElementsByTagName("html")[0]).addBehavior)?(function(){var userDataElement=document.documentElement||document.getElementsByTagName("html")[0],loaded={},prefix="userData_",list,length=0;userDataElement.addBehavior("#default#userData");userDataElement.load("userData");return{save:function(name,data){if(!userData.load[name]){userData.length++;list.push(name);}
userData.load[name]=data;userDataElement.load(prefix+name);userDataElement.setAttribute("userData",data);userDataElement.save(prefix+name);userDataElement.load("userData");userDataElement.setAttribute("list",list.join(";"));userDataElement.save("userData");return true;},erase:function(name){if(!userData.load[name])return false;list.removeByValue(name);userData.length--;delete userData.load[name];userDataElement.load(prefix+name);userDataElement.removeAttribute("userData");userDataElement.save(prefix+name);userDataElement.load("userData");userDataElement.setAttribute("list",list.join(";"));userDataElement.save("userData");return true;},load:(function(){list=userDataElement.getAttribute("list");if(!(String.isString(list))){list=[];}else{list=list.split(";");for(var i=0,l=list.length;i<l;i++){userDataElement.load(prefix+list[i]);loaded[list[i]]=userDataElement.getAttribute("userData");length++;userDataElement.load("userData");}}
return loaded;})(),length:length}})():false;var storage=(function(){if(!window.localStorage&&((window.globalStorage&&(function(){try{return globalStorage[location.hostname];}catch(e){return false}})())||userData||cookie))
return(function(){var keys=[],index=0,currentStorage,object;if(window.globalStorage&&(function(){try{return globalStorage[location.hostname];}catch(e){return false;}})()){currentStorage=globalStorage[location.hostname];object={length:currentStorage.length,getItem:function(item){return currentStorage[item]?currentStorage[item].value:undefined;},setItem:function(item,value){currentStorage[item]=value;object.length=currentStorage.length;keys.push(item);},removeItem:function(item){delete currentStorage[item];object.length=currentStorage.length;keys.removeByValue(item);},clear:function(){keys.forEach(function(item){delete currentStorage[item];});keys.length=object.length=0;},key:function(index){return keys[index];},how:"Global storage"};for(var item in currentStorage){keys[index++]=item.value;}}else if(userData){object={length:userData.length,getItem:function(item){return userData.load[item];},setItem:function(item,value){userData.save(item,value);object.length=userData.length;keys.push(item);},removeItem:function(item){userData.erase(item);object.length=userData.length;keys.removeByValue(item);},clear:function(){keys.forEach(function(item){userData.erase(item);});keys.length=object.length=0;},key:function(index){return keys[index];},how:"User data"};for(var item in userData.load){keys[index++]=item;}}else if(cookie){object={length:cookie.length,getItem:function(item){return cookie.load[item];},setItem:function(item,value){cookie.save(item,value);object.length=cookie.length;keys.push(item);},removeItem:function(item){cookie.erase(item);object.length=cookie.length;keys.removeByValue(item);},clear:function(){keys.forEach(function(item){cookie.erase(item);});keys.length=object.length=0;},key:function(index){return keys[index];},how:"Cookies"};for(var item in cookie.load){keys[index++]=item;}}
return object;})();else if(window.localStorage)return localStorage;})();var Ego,canvas,veilColor,originalGridColor,originalBackgroundColor,originalCellColor,gridColors,textColors,speedColors,sTextColors,foodColors,scoreColors,scoreColorTresholds=[],positionsCache,drawTextMultiplier,drawTextFactor=0.75,centerDrawHidingDelay=1000,GlowTextHidingDelay=1000,SpeedsCarouselVelocity=80,centerGrowDrawQueue=[],centerGlowEngaged=false,centerGlowDisabled={queue:[],enable:function(){centerGrowDrawQueue=centerGrowDrawQueue.concat(this.queue);this.queue.length=0;this.disabled=false;if(centerGrowDrawQueue.length){centerGrowDraw.apply(this,centerGrowDrawQueue[0]);centerGrowDrawQueue.shift();}},disabled:false},Html=document.documentElement||document.getElementsByTagName("html")[0],Head,Body,SVGSupport=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")&&(function(){var dataURI='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNzUiIGhlaWdodD0iMjc1Ij48L3N2Zz4%3D',img=document.createElement('img');img.src=dataURI;return img.complete||!(img.onload=function(){SVGSupport=true;});})(),CSSFilters="filters"in Html,CSSTransform="transform"in Html.style||"WebkitTransform"in Html.style||"MozTransform"in Html.style||"OTransform"in Html.style,CSSOpacity="opacity"in Html.style,CSSGlow="textShadow"in Html.style,textContent="innerText"in document.createElement("span")?"innerText":"textContent",field,fieldElement,width,height,minLarger=30,minSmaller=20,minWidth,minHeight,scoreCalcAvg=27.5,paused=false,silentPaused=false,presetLength=40,length,defaultLength=2,maxEaten=minLarger*minSmaller-defaultLength-1,maxScore,starsSpans=[],starsAnim=[],stars=[],starsImage,starsNumber=3,reactionTime=580,superFoodChance=[[100,40],[10,4],[4,2.5],function(){var status=ScalingSystem.get(),_=superFoodChance;if(status>0){status=(10-status)/10;return 1/_[2][0]-(1/_[2][0]-1/_[1][0])*status+((1/_[2][1]-(1/_[2][1]-1/_[1][1])*status)-
(1/_[2][0]-(1/_[2][0]-1/_[1][0])*status))*(Ego.length+1)/(width*height);}
if(status<0){status=(10+status)/10;return 1/_[0][0]-(1/_[0][0]-1/_[1][0])*status+((1/_[0][1]-(1/_[0][1]-1/_[1][1])*status)-
(1/_[0][0]-(1/_[0][0]-1/_[1][0])*status))*(Ego.length+1)/(width*height);}
return 1/_[1][0]+(1/_[1][1]-1/_[1][0])*(Ego.length+1)/(width*height);}],legendFoodChance=[20,8,function(){var status=ScalingSystem.get(),_=legendFoodChance;return status<5?0:1/_[0]*(status-5)/5+(1/_[1]*(status-5)/5-
1/_[0]*(status-5)/5)*(Ego.length+1)/(width*height);}],scalingSystemVars=[1,4,0.5,2],bonusFoodTolerance=[1.3,1.8,3.5,function(){var status=ScalingSystem.get(),_=bonusFoodTolerance;return status>0?_[1]-(_[1]-_[0])*status/10:(status<0?_[1]+(_[2]-_[1])*-status/10:_[1])}],speedBonus=[1,5],speedCoeff=[4,1,function(){var _=speedCoeff;return _[0]-(_[0]-_[1])*(speed-speeds[0])/(speeds[2]-speeds[0])}],speeds=[1,5,10],spawnDelay=[5000,10000,0,2000,0.45],modeSwitchLength=5000,glowLengthRoot=12,scoreRoot=13,bonusFoodSpawned=null,regularFoodSpawned={position:[],legendary:false},bonusFoodSpawnMoves,movesCounter=0,foodEatenAnim=false,foodEatenAnimDisabled=false,speedBoost=[1,0,0,1,],interval=0,first=true,maxInterval=calcInterval(speeds[2]),currInterval,fieldClass="nic",food="jidlo",bonusFood="bonusJidlo",superFood="superJidlo",legendFood="legendJidlo",body="telo",head="hlava",eatenLegendFood=false,lengthMultiplier=1,foodGlowLength=(function(){var o={};o[food]=6;o[bonusFood]=10;o[superFood]=15;o[legendFood]=25;return o;})(),foodSTextColors=(function(){var o={};o[food]=0;o[bonusFood]=1;o[superFood]=2;o[legendFood]=3;return o;})(),foodGridColors=(function(){var o={};o[food]=0;o[bonusFood]=1;o[superFood]=5;o[legendFood]=6;return o;})(),foodColorIndexes=(function(){var o={};o[food]=3;o[bonusFood]=2;o[superFood]=1;o[legendFood]=0;return o;})(),foodScoreTextSize=(function(){var o={};o[food]=1;o[bonusFood]=1.3;o[superFood]=1.8;o[legendFood]=2.6;return o;})(),foodScoreTextHideDelay=(function(){var o={};o[food]=0;o[bonusFood]=500;o[superFood]=1000;o[legendFood]=2000;return o;})(),foodBonuses=(function(){var o={};o[food]=1;o[bonusFood]=3;o[superFood]=5;o[legendFood]=15;return o;})(),foodBoosts=(function(){var o={};o[food]=[2,0.5];o[bonusFood]=[2.5,3/4];o[superFood]=[3.5,1];o[legendFood]=[4,4/3];return o;})(),LEFT=0,UP=1,RIGHT=2,DOWN=3,PAUSE=4,SILENTPAUSE=5,collisionList=[body,head],speed=storage?+storage.getItem("speed")||speeds[1]:speeds[1],performMove,DayTimeListener,listeningManager={listener:function(result){if(result<4&&(!paused||silentPaused))Buffer.hit(result);else if((result===PAUSE&&!switchingModes)||result===SILENTPAUSE){if(!paused){if(result===PAUSE){Cursor.Show();Pause.show();}
paused=true;if(result===SILENTPAUSE)silentPaused=true;(speedBoost[0]===1&&speedBoost[1]===0?clearInterval:clearTimeout)(interval);}else{Cursor.Hide();paused=false;if(result===SILENTPAUSE)silentPaused=false;else Pause.hide();interval=(speedBoost[0]===1&&speedBoost[1]===0?setInterval:setTimeout)(performMove,currInterval/speedBoost[0],currInterval);}}},listening:false,listen:function(){if(!this.listening){listener.startListening();this.listening=true;}},stopListening:function(){if(this.listening){listener.stopListening();this.listening=false;}}},listener=new Listener([left,up,right,down,pause],false,listeningManager.listener),tableStyle,switchingModes=false,eaten=0,score=0;Screen.onload=function(){Head=document.head||document.getElementsByTagName("head")[0];Body=document.body||document.getElementsByTagName("body")[0];canvas=document.getElementById("canvas");game(true);};function reset(){var calcDimensions=function(){width=Math.floor((Screen.clientDimensions[0]-1)/(length+1));height=Math.floor((Screen.clientDimensions[1]-1)/(length+1));},squareRescale=function(){length=Math.min(-(minWidth-Screen.clientDimensions[0]+1)/minWidth,-(minHeight-Screen.clientDimensions[1]+1)/minHeight).floor();},applyCSS=function(){var append,rules;if(tableStyle===undefined){append=true;tableStyle=document.createElement("style");tableStyle.setAttribute("type","text/css");}else{while(tableStyle.hasChildNodes()){tableStyle.removeChild(tableStyle.firstChild);}}
rules=document.createTextNode(".gameField td{width:"+length+"px;height:"+length+"px;}");if(tableStyle.styleSheet)
tableStyle.styleSheet.cssText=rules.nodeValue;else
tableStyle.appendChild(rules);if(append===true)
Head.appendChild(tableStyle);};minWidth=Screen.clientDimensions[0]>Screen.clientDimensions[1]?minLarger:minSmaller;minHeight=Screen.clientDimensions[1]>Screen.clientDimensions[0]?minLarger:minSmaller;length=presetLength;squareRescale();calcDimensions();applyCSS();drawTextMultiplier=(Math.abs(width-height)/Math.min(width,height))*drawTextFactor+1;lengthMultiplier=(width*height-defaultLength-1)/(maxEaten);speedBoost[3]=1-(defaultLength+1)/(0.75*width*height);field=new gameField(width,height,fieldClass,collisionList,lifeTimeManager);if(fieldElement)canvas.removeChild(fieldElement);fieldElement=field.toHTML();canvas.appendChild(fieldElement);fieldElement.cellSpacing=1;fieldElement.style.left=Math.floor((Screen.clientDimensions[0]-fieldElement.offsetWidth)/2)+"px";fieldElement.style.top=Math.floor((Screen.clientDimensions[1]-fieldElement.offsetHeight)/2)+"px";positionsCache=[];for(var index=[0,];index[0]<width;index[0]++){positionsCache[index[0]]=[];for(index[1]=0;index[1]<height;index[1]++){positionsCache[index[0]][index[1]]=field.getPos(index[0],index[1]);}}};function clear(){paused=false;movesCounter=0;bonusFoodSpawned=null;eatenLegendFood=false;AchievementBonusFoodCollect=[0,0];AchievementSuperFoodCollect=[0,0];FirstCombo=true;AchievementsListener.detach();centerGrowDrawQueue.length=0;scoreColorTresholds.length=0;score=0;eaten=0;field.clear();field.movement.clearCallbacks();field.lifeTimeManager.clear();(speedBoost[0]===1&&speedBoost[1]===0?clearInterval:clearTimeout)(interval);listeningManager.stopListening();Buffer.unregister();ScalingSystem.reset();speedBoost[0]=1;speedBoost[1]=speedBoost[2]=0;if(Ego.alive)Ego.destroy(true);if(stars.length)undrawAllStars();};function game(resetField){performMove=function(repeated){if(speedBoost[0]===1){if(speedBoost[1]!==0){speedBoost[1]=0;interval=setInterval(performMove,currInterval);}}else{interval=setTimeout(performMove,currInterval/speedBoost[0],currInterval);if(speedBoost[0]>1+speedBoost[1])
speedBoost[0]-=speedBoost[1];else speedBoost[0]=1;}field.movement.perform();};if(resetField)reset();if(first){if(window.google&&google.loader&&google.loader.ClientLocation){DayTimeListener=new DayTime(google.loader.ClientLocation.latitude,google.loader.ClientLocation.longitude);(DayTimeListener.now===DayTime.DAY?Day:Night).Apply();DayTimeListener.listen(modeSwitch);}else Day.Apply();GUIInit();}
focus();Menu.show(undefined,{showScore:!first,callback:function(){if(first)first=false;else clear();maxScore=calcScore(maxEaten);PrepareAchievements(speed,ScoreAchievements,DynamicAchievementsList);AchievementsListener.attach(StaticAchievementsList);AchievementsListener.attach(DynamicAchievementsList);currInterval=calcInterval();spawn(food);Ego=new Snake(field,{head:head,body:body,length:defaultLength,automation:{movement:{lifeTimeManager:field.lifeTimeManager,pursue:{method:NONE}},autoSpawn:true,drawStars:true},collision:{walls:TRANSIT,body:true,items:true},callbacks:{death:function(){if(speedBoost[0]===1||(speedBoost[0]>1&&speedBoost[2]===currInterval)){(speedBoost[0]===1&&speedBoost[1]===0?clearInterval:clearTimeout)(interval);centerGrowDrawQueue.length=0;listeningManager.stopListening();Buffer.unregister();paused=true;Cursor.Show();}else{if(speedBoost[2]+currInterval/speedBoost[0]>=currInterval){speedBoost[2]=currInterval;clearTimeout(interval);setTimeout(performMove,currInterval-speedBoost[2],currInterval);}else{speedBoost[2]+=currInterval/speedBoost[0];}
return false;}},tailMiss:function(){AchievementsListener.check("tailMiss");},afterDeath:game,collision:function(x,y,get){var currBoost=speedBoost[0],currBoostReductionPerMove=speedBoost[1],currNumOfBoostedMoves=currBoostReductionPerMove?Math.floor((currBoost-1)/currBoostReductionPerMove):0,newBoost,newBoostReductionPerMove,newNumOfBoostedMoves;switch(get){case food:case superFood:case bonusFood:case legendFood:FullscreenGlow(currInterval*foodGlowLength[get],gridColors[foodGridColors[get]],foodGridColors[get]);score=calcScore(eaten+=foodBonuses[get]);this.length=defaultLength+Math.round(eaten*lengthMultiplier);if(get!==food)
ScalingSystem.set(SKILL);AchievementsListener.check(get);if(get===legendFood){eatenLegendFood=true;regularFoodSpawned.remove();}else if(get===bonusFood||get===superFood){bonusFoodSpawned.remove();bonusFoodSpawnMoves=calcBonusFoodSpawn(this.length+1);}else{if(!bonusFoodSpawned&&bonusFoodSpawnMoves-movesCounter>=3000/currInterval)
movesCounter+=Math.round(1000/currInterval);}
snakeDraw([x,y],foodScoreTextHideDelay[get],sTextColors[foodSTextColors[get]],"score",(score>=1000?0.9:1)*foodScoreTextSize[get],score>=1000?score.group():score);field.remove(x,y);this.move(false);if(get===legendFood)
regularFoodSpawned.legendary=false;if(get===food||get===legendFood)
spawn(food);if(speedBoost[3]){(speedBoost[0]===1&&speedBoost[1]===0?clearInterval:clearTimeout)(interval);newBoost=foodBoosts[get][0]*speedBoost[3];newBoostReductionPerMove=(foodBoosts[get][0]-1)/(Math.avg(width,height)*foodBoosts[get][1])
newNumOfBoostedMoves=Math.floor((newBoost-1)/newBoostReductionPerMove);if(newBoost>currBoost)
speedBoost[0]=newBoost;if(newNumOfBoostedMoves>=currNumOfBoostedMoves)
speedBoost[1]=newBoostReductionPerMove;else
speedBoost[1]=((newBoost>currBoost?newBoost:currBoost)-1)/currNumOfBoostedMoves;interval=setTimeout(performMove,currInterval/speedBoost[0],currInterval);}}
AchievementsListener.check(eaten);},directionChange:function(){AchievementsListener.check("changeDirection");},lengthChange:function(length){if(speedBoost[3]!==0){speedBoost[3]=1-(this.length+1)/(0.75*width*height);if(speedBoost[3]<0)speedBoost[3]=0;}},move:function(){if(speedBoost[2]!==0)speedBoost[2]=0;if(bonusFoodSpawned&&movesCounter>=bonusFoodSpawned.lifetime){bonusFoodSpawned.lifetime=Infinity;if(bonusFoodSpawned.extra){bonusFoodSpawned.warp();}else{bonusFoodSpawned.despawn();}}
if(!bonusFoodSpawned&&movesCounter>=bonusFoodSpawnMoves){spawn(toss(superFoodChance[3]())?superFood:bonusFood);}}},position:[Math.round((width-1)/2),Math.round((height-1)/2)],direction:Math.round(Math.random()*3)});field.movement.addCallback(function(){movesCounter++;});Cursor.Hide();bonusFoodSpawnMoves=calcBonusFoodSpawn(Ego.length+1);interval=setInterval(performMove,currInterval);Buffer.register(Ego);listeningManager.listen();}});};function gameField(width,height,fieldClass,collisionList,manager){var field=[],Objectfield=[],HTMLfield=[],lifeTimeManager=this.lifeTimeManager=new manager();this.collisionList=collisionList;this.isFull=false;this.toHTML=function(){var table=document.createElement("table"),tbody=document.createElement("tbody"),tr,td;table.className="gameField";for(var count=0;count<height;count++){tr=document.createElement("tr");for(var count2=0;count2<width;count2++){td=document.createElement("td");if(field[count]&&field[count][count2])td.className=field[count][count2];else td.className=fieldClass;tr.appendChild(td);if(!HTMLfield[count2])HTMLfield[count2]=[];HTMLfield[count2][count]=td;}
tbody.appendChild(tr);}
table.appendChild(tbody);return table;};this.spawn=function(x,y,what,lifeTime){if(Number.isNumber(lifeTime))
lifeTimeManager.set(x,y,lifeTime);else if((this.collisionList.indexOf(what)>-1&&(!field[x]||!this.collisionList.indexOf(field[x][y])))){if(!Number.isNumber(lifeTime))
return;else lifeTimeManager.set(x,y,lifeTime);}
var changes=!(field[x]&&field[x][y]);if(!field[x])field[x]=[];field[x][y]=what;if(HTMLfield[x]&&HTMLfield[x][y])HTMLfield[x][y].className=what;if(changes&&this.getFree().length===0&&!this.isFull)this.isFull=true;};this.copy=function(x,y,x2,y2,lifeTime){if(Number.isNumber(lifeTime))
lifeTimeManager.set(x2,y2,lifeTime);else if((this.collisionList.indexOf(what)>-1&&(!field[x]||!this.collisionList.indexOf(field[x][y])))){if(!Number.isNumber(lifeTime))
return;else lifeTimeManager.set(x2,y2,lifeTime);}
var changes=!(field[x2]&&field[x2][y2]);if(!field[x])field[x]=[];if(!field[x2])field[x2]=[];field[x2][y2]=field[x][y];if(HTMLfield[x2]&&HTMLfield[x2][y2])HTMLfield[x2][y2].className=field[x][y];if(changes&&this.getFree().length===0&&!this.isFull)this.isFull=true;};this.move=function(x,y,x2,y2,lifeTime){if(!Number.isNumber(lifeTime)){lifeTimeManager.remove(x,y,lifeTime);lifeTimeManager.set(x2,y2,lifeTime);}
else if((this.collisionList.indexOf(what)>-1&&(!field[x]||!this.collisionList.indexOf(field[x][y])))){if(!Number.isNumber(lifeTime))
return;else{lifeTimeManager.remove(x,y,lifeTime);lifeTimeManager.set(x2,y2,lifeTime);}}
if(!field[x])field[x]=[];if(!field[x2])field[x2]=[];field[x2][y2]=field[x][y];if(HTMLfield[x2]&&HTMLfield[x2][y2])HTMLfield[x2][y2].className=field[x][y];field[x][y]=null;if(HTMLfield[x]&&HTMLfield[x][y])HTMLfield[x][y].className=fieldClass;};this.remove=function(x,y){if(!field[x])field[x]=[];if(this.isFull)this.isFull=false;field[x][y]=null;if(HTMLfield[x]&&HTMLfield[x][y])HTMLfield[x][y].className=fieldClass;lifeTimeManager.remove(x,y);};this.clear=function(){field=[];Objectfield=[];if(this.isFull)this.isFull=false;for(var count=0;count<width;count++){if(!HTMLfield[count])HTMLfield[count]=[];for(var count2=0;count2<height;count2++){if(HTMLfield[count][count2])HTMLfield[count][count2].className=fieldClass;}}
lifeTimeManager.clear();};this.get=function(x,y){return field[x]&&field[x][y]?field[x][y]:false;};this.getElement=function(x,y){return HTMLfield[x]&&HTMLfield[x][y]?HTMLfield[x][y]:false;};this.getObject=function(x,y){if(!Objectfield[x])Objectfield[x]=[];if(!Objectfield[x][y])Objectfield[x][y]={};return Objectfield[x][y];};this.clearObject=function(x,y){if(!Objectfield[x]||!Objectfield[x][y])return false;for(var z in Objectfield[x][y]){delete Objectfield[x][y][z];}
return true;};this.getFree=function(){var places=[],count,count2;for(count=0;count<width;count++){if(!field[count]){for(count2=0;count2<height;count2++){places.push([count,count2]);}}else{for(count2=0;count2<height;count2++){if(!field[count][count2])places.push([count,count2]);}}}
return places;};this.getPos=function(x,y){if(!HTMLfield[x]||!HTMLfield[x][y])return false;var pos=getPos(HTMLfield[x][y]);pos[1]+=(HTMLfield[x][y].offsetHeight-length)-HTMLfield[x][y].offsetHeight/2;return pos;};var callbacks=[],FCCallbacks=[];this.movement={addCallback:function(obj){callbacks.push(obj);},addFCCallback:function(obj){FCCallbacks.push(obj);},removeCallback:function(obj){var index=callbacks.indexOf(obj);if(index!==-1)callbacks.remove(index);},removeFCCallback:function(obj){var index=FCCallbacks.indexOf(obj);if(index!==-1)
FCCallbacks.remove(index);},clearCallbacks:function(){callbacks.length=0;},perform:function(){FCCallbacks.forEach(function(obj){if(!obj)return false;else if(obj instanceof Function)obj();else obj.callback.call(obj.context);});lifeTimeManager.decrease();callbacks.forEach(function(obj){if(!obj)return false;else if(obj instanceof Function)obj();else obj.callback.call(obj.context);});}};};function lifeTimeManager(){if(!(this instanceof lifeTimeManager))return;var container=[];if(!(lifeTimeManager.array instanceof Array))
lifeTimeManager.array=[this];else
lifeTimeManager.array.push(this);for(var count=0;count<width;count++){container[count]=[];for(var count2=0;count2<height;count2++){container[count][count2]=0;}}
this.destroy=function(){lifeTimeManager.array.remove(lifeTimeManager.array.indexOf(this));}
this.get=function(x,y){if(!container[x]||!Number.isNumber(container[x][y]))
return 0;return container[x][y];}
this.getArray=function(x,y){var New=[];container.forEach(function(e){New.push(e.slice(0));});return New;}
this.set=function(x,y,value){if(!container[x]||!Number.isNumber(container[x][y])||container[x][y]>=value)
return false;return container[x][y]=value;}
this.decrease=function(){for(var count=0;count<width;count++){for(var count2=0;count2<height;count2++){if(container[count][count2])
container[count][count2]--;}}}
this.clear=function(){for(var count=0;count<width;count++){for(var count2=0;count2<height;count2++){if(container[count][count2])
container[count][count2]=0;}}}
this.remove=function(x,y){if(!container[x]||!Number.isNumber(container[x][y]))
return;if(container[x][y])
container[x][y]=0;}};lifeTimeManager.globalDecrease=function(){if(!this.array)return;this.array.forEach(function(field){field.decrease();});};lifeTimeManager.globalClear=function(){if(!this.array)return;this.array.forEach(function(field){field.clear();});};lifeTimeManager.globalRemove=function(x,y){if(!this.array)return;this.array.forEach(function(field){field.remove(x,y);});};lifeTimeManager.globalDestroy=function(){if(!this.array)return;this.array.length=0;};function PrepareAchievements(speed,data,outputArray){var result=[],adopt=[],dynamicAmount=0,dynamicIndex=1;data.forEach(function(data){var index=0;if(data.text instanceof Array){for(index=data.text[1];index<=data.text[2];index++){dynamicAmount++;result.push({text:data.text[0][index],colors:data.colors,sizeMultiplier:data.sizeMultiplier,delay:data.delay,score:"$",first:index===data.text[1]});}}else{if(!data.treshold)dynamicAmount++;(data.colors==="adopt"||data.sizeMultiplier==="adopt"||data.delay==="adopt"?adopt:result).push({text:data.text,colors:data.colors,sizeMultiplier:data.sizeMultiplier,delay:data.delay,score:data.treshold?(data.treshold.type==="score"?findScore(data.treshold.amount):data.treshold.amount):"$$"});}});result.forEach(function(result,index,that){if(result.score==="$"){result.score=dynamicIndex++*maxEaten/dynamicAmount;if(result.first)scoreColorTresholds.push(calcScore(result.score));}else if(result.score==="$$"){result.score=dynamicIndex++*maxEaten/dynamicAmount;adopt.push(result);that.remove(index);}});adopt.forEach(function(adopt){var offsetArray=[];result.forEach(function(result){if(Number.isNumber(result.score))
offsetArray.push(Math.abs(result.score-adopt.score));});match=offsetArray.indexOf(Math.min.apply(Math,offsetArray));if(match<result.length-2)match++;if(adopt.colors==="adopt")
adopt.colors=result[match].colors;if(adopt.sizeMultiplier==="adopt")
adopt.sizeMultiplier=result[match].sizeMultiplier;if(adopt.delay==="adopt")
adopt.delay=result[match].delay;result.push(adopt);});if(outputArray.length>0)outputArray.length=0;result.forEach(function(field){outputArray.push({count:false,repeat:false,allowedKeyWords:false,allowedKeyWordTypes:"number",condition:function(keyWord){return keyWord>=field.score;},callback:function(keyWord){centerGrowDraw(500,field.delay,textColors[field.colors],length/2,length*field.sizeMultiplier,field.text);FullscreenGlow(currInterval*glowLengthRoot*field.delay/2000,gridColors[field.colors+(field.colors===3?2:1)],field.colors+(field.colors===3?2:1));}});});};function modeSwitch(mode){if(switchingModes)return;if(Graphics.ModeSwitchAnimation===false)
return(mode===DayTime.DUSK?Night:Day).Apply();var count=0,counter=function(){if(++count===3)mSwitch();},mSwitch=function(){Skin.Transition(mode===DayTime.DAWN?Night:Day,mode===DayTime.DUSK?Night:Day,modeSwitchLength,function(){foodEatenAnimDisabled=false;centerGlowDisabled.enable();if(keyListenerListening){if(silentPaused)
listeningManager.listener(SILENTPAUSE);listeningManager.listen();}
openGUIs.forEach(function(GUI){GUI.show();});focus();switchingModes=false;});},openGUIs=[],openGUIsLength,keyListenerListening=listeningManager.listening;switchingModes=true;GUI.instances.forEach(function(GUInst){if(GUInst.status!==GUI.HIDDEN)
openGUIs.push(GUInst);});openGUIsLength=openGUIs.length;if(keyListenerListening){if(!paused)
listeningManager.listener(SILENTPAUSE);Buffer.clear();}
(mode===DayTime.DAWN?Day:Night).ApplyTextVariables();foodEatenAnimDisabled=true;centerGlowDisabled.disabled=true;if(openGUIsLength)GUI.hide(counter);else count++;if(centerGlowEngaged)
centerGrowDrawQueue.callback=counter;else count++;if(foodEatenAnim)
foodEatenAnim.callback=counter;else count++;if(count===3)mSwitch();};function calcInterval(passedSpeed){return(6000-((passedSpeed||speed)-1)*(5000/(speeds[2]-speeds[0])))/scoreCalcAvg;};function calcScore(eaten){if(eaten>maxEaten)
eaten=maxEaten;return Math.floor((speedBonus[0]+(speed-1)*(speedBonus[1]-speedBonus[0])/(speeds[2]-speeds[0]))*(1+eaten/(maxEaten)*2)*eaten*scoreRoot);};function findScore(score){var a=score,b=speed,c=eaten,d=minWidth,e=minHeight,f=defaultLength,g=scoreRoot,h=2,i=speedBonus[1],j=speeds[2]-speeds[0],k=1,l=speedBonus[0],m=1;return Math.ceil(-((e*d-f-m)*(-j*Math.sqrt(g.pow()*m.pow()*(((b-k)*(i-l))/j+l).pow()+(4*a*g*h*(((b-k)*(i-l))/j+l))
/ (e * d - f - m)) + b * g * m * i + g * j * l * m + g * k * l * m - b *
                  g * l * m - g * k * m * i)) /(2*g*h*(b*i-k*i+j*l+k*l-b*l)));};function calcDistance(location,target,collision){var distX,distY;if(collision===false){var middle=[],loc=location.slice(0),tar=target.slice(0);if(width/2&1){middle[0]=Math.floor(width/2);middle[1]=Math.floor(height/2);if(loc[0]>middle[0])loc[0]=middle[0]-(loc[0]-middle[0]);if(tar[0]>middle[0])tar[0]=middle[0]-(tar[0]-middle[0]);if(loc[1]>middle[1])loc[1]=middle[1]-(loc[1]-middle[1]);if(tar[1]>middle[1])tar[1]=middle[1]-(tar[1]-middle[1]);}else{middle[0]=(width/2)-1;middle[1]=(height/2)-1;if(loc[0]>middle[0])loc[0]=middle[0]-(loc[0]-middle[0])+1;if(tar[0]>middle[0])tar[0]=middle[0]-(tar[0]-middle[0])+1;if(loc[1]>middle[1])loc[1]=middle[1]-(loc[1]-middle[1])+1;if(tar[1]>middle[1])tar[1]=middle[1]-(tar[1]-middle[1])+1;}
distX=Math.min(loc[0]+tar[0],Math.abs(location[0]-target[0]));distY=Math.min(loc[1]+tar[1],Math.abs(location[1]-target[1]));}else{distX=Math.abs(loc[0]-tar[0]);distY=Math.abs(loc[1]-tar[1]);}
return distX+distY;};function calcBonusFoodSpawn(length){return Math.round(((1-((1-spawnDelay[4])*ScalingSystem.get().abs()/10))*((spawnDelay[0]+Math.random()*(spawnDelay[1]-spawnDelay[0]))+
(spawnDelay[2]+(1-length/maxEaten)*spawnDelay[3])))/maxInterval);};function FullscreenGlow(duration,color,importance){if(!foodEatenAnimDisabled&&Graphics.ChangingColor&&Graphics.FullscreenEffects&&((foodEatenAnim&&(importance>foodEatenAnim.importance||(importance===foodEatenAnim.importance&&color===foodEatenAnim.color)))||!foodEatenAnim)){var count=0;if(foodEatenAnim){foodEatenAnim.anim[0]();foodEatenAnim.anim[1]();}
foodEatenAnim={"importance":importance,"color":color,"anim":[recolor(duration,color[0],originalGridColor,function(color){fieldElement.style.backgroundColor=color;},function(){fieldElement.style.backgroundColor="";count++;if(count===2){if(foodEatenAnim.callback instanceof Function)
foodEatenAnim.callback();foodEatenAnim=false;}}),recolor(duration,color[1],originalBackgroundColor,function(color){Body.style.backgroundColor=color;},function(){Body.style.backgroundColor="";count++;if(count===2){if(foodEatenAnim.callback instanceof Function)
foodEatenAnim.callback();foodEatenAnim=false;}})]}}};function drawStars(position){position=positionsCache[position[0]][position[1]];var masterIndex=starsSpans.length;var innerElement=document.createElement("span");innerElement.style.position="relative";innerElement.style.height=innerElement.style.width=length+"px";var eclipse=calculateEllipse(true,length/2,length/2,length/2,length/6,0,Graphics.FramesPerSecond),index=[],last,node=new Image();node.src=starsImage[SVGSupport?1:0];node.style.width=node.style.height=(length/3)+"px";node.style.position="absolute";for(var count=1;count<=starsNumber;count++){if(count===starsNumber)index.push(eclipse.length-1);else index.push(Math.round((eclipse.length-1)/starsNumber*count));last=stars.push(node.cloneNode(false))-1;stars[last].style.left=(eclipse[index[stars.length-1]][0]-(eclipse[index[stars.length-1]][0]/length)*length/3)+"px";stars[last].style.top=eclipse[index[stars.length-1]][1]+(length/2)-(length/6)+"px";innerElement.appendChild(stars[stars.length-1]);}
starsSpans.push(document.createElement("span"));starsSpans[masterIndex].style.position="absolute";starsSpans[masterIndex].style.left=(position[0]<Screen.clientDimensions[0]-length?position[0]:Screen.clientDimensions[0]-length)+"px";starsSpans[masterIndex].style.top=(position[1]<Screen.clientDimensions[1]-length?position[1]:Screen.clientDimensions[1]-length)+"px";starsSpans[masterIndex].appendChild(innerElement);canvas.appendChild(starsSpans[masterIndex]);starsAnim.push(setInterval(function(){for(var count=0;count<index.length;count++){index[count]++;index[count]%=eclipse.length-1;stars[count].style.left=(eclipse[index[count]][0]-(eclipse[index[count]][0]/length)*length/3)+"px";stars[count].style.top=(eclipse[index[count]][1]+(length/2)-(length/6))+"px";}},1000/Graphics.FramesPerSecond));};function undrawStars(index){if(index>starsSpans.length-1)return false;clearInterval(starsAnim[index]);canvas.removeChild(starsSpans[index]);stars.splice(index,1);starsAnim.splice(index,1);return true;};function undrawAllStars(){if(starsSpans.length===0)return false;starsSpans.forEach(function(span,index){clearInterval(starsAnim[index]);canvas.removeChild(span);stars.splice(index,3);starsAnim.splice(index,3);starsSpans.splice(index,1);});return true;};function snakeDraw(position,delay,colors,className,sizeMultiplier,text){if(delay<=0)delay=1;var timeout=[],x=position[0],y=position[1],textColor=colors[0],shadowColor=colors[1];position=positionsCache[x][y];position=[(isNaN(Math.round(position[0]))?0:Math.round(position[0])),(isNaN(Math.round(position[1]))?0:Math.round(position[1]))];var score=document.createElement("div");score.className=className?"absolutePositionedText snakeDraw "+className:"absolutePositionedText snakeDraw";score.style.color=textColor;if(Graphics.TextGlowEffects&&Graphics.TextGlowEffectsOnSnakeAndCenterText)
setGlow(score,GlowMagnitude,shadowColor);score.style.height=(sizeMultiplier*length)+"px";score.style.fontSize=(sizeMultiplier*length)+"px";score.innerHTML=text;canvas.appendChild(score);if(Graphics.MovingObjects===true)
timeout[0]=textMove(score,delay+1000,position[0]+(length-score.offsetWidth)/2,position[1]<(Graphics.TextGlowEffects===true?GlowMagnitude/2:0)?(Graphics.TextGlowEffects===true?GlowMagnitude/2:0):position[1],position[0]+(length-score.offsetWidth)/2,position[1]+(Graphics.TextGlowEffects===true?GlowMagnitude/2:0)+2*(position[1]+(Graphics.TextGlowEffects===true?GlowMagnitude/2:0)+2*(-sizeMultiplier*length)<=0?sizeMultiplier*length:-sizeMultiplier*length),Graphics.TextGlowEffects===true?GlowMagnitude:false,true);else{score.style.left=(position[0]+score.offsetWidth+(Graphics.TextGlowEffects===true?GlowMagnitude/2:0)>Screen.clientDimensions[0]?Screen.clientDimensions[0]-score.offsetWidth-(Graphics.TextGlowEffects===true?GlowMagnitude/2:0):(position[0]+(length-score.offsetWidth)/2<(Graphics.TextGlowEffects===true?GlowMagnitude/2:0)?(Graphics.TextGlowEffects===true?GlowMagnitude/2:0):position[0]+(length-score.offsetWidth)/2))+"px";score.style.top=(position[1]+(Graphics.TextGlowEffects===true?GlowMagnitude/2:0)+0.75*(position[1]+(Graphics.TextGlowEffects===true?GlowMagnitude/2:0)+0.75*(-sizeMultiplier*length)<=0?2*length:-sizeMultiplier*length))+"px";}
if(Graphics.Transparency===true&&Graphics.TransparencyOnSnakeText===true){setTimeout(function(){timeout[1]=retransparent(score,1000,100,0)},delay);}else{setTimeout(function(){hide(score);},delay+1000);}
setTimeout(function(){if(timeout[0])timeout[0]();if(timeout[1])timeout[1]();hide(score);canvas.removeChild(score);},delay+1000);};function centerGrowDraw(flightDelay,delay,colorArray,size,finalSize,text,inner){var textColor=colorArray[0],finalTextColor=colorArray[1],shadowColor=colorArray[2],finalShadowColor=colorArray[3];if(centerGlowDisabled.disabled&&!inner){centerGlowDisabled.queue.push([flightDelay,delay,colorArray,size,finalSize,text,true]);return;}
if(centerGlowEngaged&&!inner){centerGrowDrawQueue.push([flightDelay,delay,colorArray,size,finalSize,text,true]);return;}
centerGlowEngaged=true;size=size*drawTextMultiplier;finalSize=finalSize*drawTextMultiplier;if(delay<=0)delay=1;var score=document.createElement("div");score.className="absolutePositionedText glowText";score.style.color=Graphics.ChangingColor===true?textColor:finalTextColor;score.style.fontSize=(Graphics.ResizingTexts===true?size:finalSize)+"px";score.innerHTML=text;if(Graphics.Transparency===true)
setOpacity(score,0);if(Graphics.TextGlowEffects===true)
setGlow(score,GlowMagnitude,Graphics.ChangingColor===true?shadowColor:finalShadowColor);canvas.appendChild(score);if(Graphics.Transparency===true)
retransparent(score,flightDelay/2,0,100);if(Graphics.ResizingTexts===true){if(Graphics.RotatingObjects===true)
rotate(score,flightDelay,0,360);textResize(score,flightDelay,size,finalSize,function(){score.style.left=String(Screen.clientDimensions[0]/2-score.offsetWidth/2)+"px";score.style.top=String(Screen.clientDimensions[1]/2-score.offsetHeight/2)+"px";},function(){score.style.left=String(Screen.clientDimensions[0]/2-score.offsetWidth/2)+"px";score.style.top=String(Screen.clientDimensions[1]/2-score.offsetHeight/2)+"px";var sizeInterval=Graphics.ResizingTexts===true&&Graphics.Transparency===true&&Graphics.GlowTextHidingAndEnlarging===true?setTimeout(function(){sizeInterval=textResize(score,GlowTextHidingDelay,finalSize,(((Math.min(Screen.clientDimensions[0]/score.offsetWidth,Screen.clientDimensions[1]/score.offsetHeight)-1)*0.7)+1)>=2?2*finalSize:(((Math.min(Screen.clientDimensions[0]/score.offsetWidth,Screen.clientDimensions[1]/score.offsetHeight)-1)*0.7)+1)*finalSize,function(){score.style.left=String(Screen.clientDimensions[0]/2-score.offsetWidth/2)+"px";score.style.top=String(Screen.clientDimensions[1]/2-score.offsetHeight/2)+"px";});},delay):false;var colorInterval=Graphics.ChangingColor===true?[finalTextColor!=textColor?recolor(delay,textColor,finalTextColor,function(color){score.style.color=color;},function(){colorInterval[0]=false;}):false,finalShadowColor!=shadowColor&&Graphics.TextGlowEffects===true?recolor(delay,shadowColor,finalShadowColor,function(color){setGlow(score,GlowMagnitude,color);},function(){colorInterval[1]=false;}):false]:[false,false];if(Graphics.Transparency===true){setTimeout(function(){retransparent(score,GlowTextHidingDelay,100,0,function(){if(sizeInterval){if(sizeInterval instanceof Function)sizeInterval();else clearTimeout(sizeInterval);}
if(colorInterval[0])colorInterval[0]();if(colorInterval[1])colorInterval[1]();hide(score);canvas.removeChild(score);if(centerGrowDrawQueue.length>0){centerGrowDraw.apply(this,centerGrowDrawQueue[0]);centerGrowDrawQueue.shift();}else{if(centerGrowDrawQueue.callback instanceof Function){centerGrowDrawQueue.callback();centerGrowDrawQueue.callback=null;}
centerGlowEngaged=false;}});},delay);}else{setTimeout(function(){hide(score);if(sizeInterval){if(sizeInterval instanceof Function)sizeInterval();else clearTimeout(sizeInterval);}
if(colorInterval[0])colorInterval[0]();if(colorInterval[1])colorInterval[1]();hide(score);canvas.removeChild(score);if(centerGrowDrawQueue.length>0){centerGrowDraw.apply(this,centerGrowDrawQueue[0]);centerGrowDrawQueue.shift();}else{if(centerGrowDrawQueue.callback instanceof Function){centerGrowDrawQueue.callback();centerGrowDrawQueue.callback=null;}
centerGlowEngaged=false;}},delay+GlowTextHidingDelay);}});}else{score.style.left=String(Screen.clientDimensions[0]/2-score.offsetWidth/2)+"px";score.style.top=String(Screen.clientDimensions[1]/2-score.offsetHeight/2)+"px";var colorInterval=Graphics.ChangingColor===true?[finalTextColor!=textColor?recolor(delay,textColor,finalTextColor,function(color){score.style.color=color;},function(){colorInterval[0]=false;}):false,finalShadowColor!=shadowColor&&Graphics.TextGlowEffects===true?recolor(delay,shadowColor,finalShadowColor,function(color){setGlow(score,GlowMagnitude,color);},function(){colorInterval[1]=false;}):false]:[false,false];if(Graphics.Transparency===true){setTimeout(function(){retransparent(score,1000,100,0,function(){if(colorInterval[0])colorInterval[0]();if(colorInterval[1])colorInterval[1]();hide(score);canvas.removeChild(score);if(centerGrowDrawQueue.length>0){centerGrowDraw.apply(this,centerGrowDrawQueue[0]);centerGrowDrawQueue.shift();}else{if(centerGrowDrawQueue.callback instanceof Function){centerGrowDrawQueue.callback();centerGrowDrawQueue.callback=null;}
centerGlowEngaged=false;}})},delay);}else{setTimeout(function(){hide(score);clearInterval(interval[0]);clearInterval(interval[1]);hide(score);canvas.removeChild(score);if(centerGrowDrawQueue.length>0){centerGrowDraw.apply(this,centerGrowDrawQueue[0]);centerGrowDrawQueue.shift();}else{if(centerGrowDrawQueue.callback instanceof Function){centerGrowDrawQueue.callback();centerGrowDrawQueue.callback=null;}
centerGlowEngaged=false;}},delay+GlowTextHidingDelay);}}};function spawn(what){if(field.isFull)return false;var funkce,oldMissPenalization;switch(what){case superFood:case bonusFood:{if(bonusFoodSpawned&&bonusFoodSpawned.anim instanceof Function){bonusFoodSpawned.anim();bonusFoodSpawned.anim=false;}
AchievementBonusFoodFading=false;var position=Ego.find().random();if(!position)return;var lifetime=position[2]*bonusFoodTolerance[3](),fadeInterval=(5<=lifetime?5:lifetime)*currInterval,pointer=field.getElement(position[0],position[1]),missPenalization=false,reactionTimeout;bonusFoodSpawned=field.getObject(position[0],position[1]);bonusFoodSpawned.position=position;bonusFoodSpawned.time=Date.now();bonusFoodSpawned.lifetime=Infinity;if(Graphics.ChangingColor===true){pointer.style.backgroundColor=originalCellColor;funkce=recolor(fadeInterval,originalCellColor,foodColors[foodColorIndexes[what]],function(color){pointer.style.backgroundColor=color;},function(){bonusFoodSpawned.anim=false;pointer.style.backgroundColor="";});bonusFoodSpawned.anim=function(){funkce();pointer.style.backgroundColor="";}}
field.spawn(position[0],position[1],what);Snake.cleanCache();reactionTimeout=setTimeout(function(){reactionTimeout=false;movesCounter=0;bonusFoodSpawned.lifetime=(missPenalization=Ego.find(bonusFoodSpawned.position).length*bonusFoodTolerance[3]())||lifetime;},reactionTime);bonusFoodSpawned.extra=what===superFood;bonusFoodSpawned.remove=function(){movesCounter=0;if(reactionTimeout){clearTimeout(reactionTimeout);reactionTimeout=false;}
if(this.anim instanceof Function){this.anim();this.anim=false;}
field.clearObject(position[0],position[1]);bonusFoodSpawned=null;}
bonusFoodSpawned.despawn=function(){AchievementBonusFoodFading=true;var despawn=function(){bonusFoodSpawned.anim=false;AchievementBonusFoodFading=false;field.remove(position[0],position[1]);field.clearObject(position[0],position[1]);if(missPenalization){AchievementsListener.check("missBonusFood");ScalingSystem.set(HELP);}
bonusFoodSpawnMoves=calcBonusFoodSpawn(Ego.length+1);bonusFoodSpawned=null;movesCounter=0;field.clearObject(position[0],position[1]);};if(this.anim instanceof Function){this.anim();this.anim=false;}
if(Graphics.ChangingColor===true){funkce=recolor(fadeInterval,foodColors[foodColorIndexes[bonusFood]],originalCellColor,function(color){pointer.style.backgroundColor=color;},function(){bonusFoodSpawned.anim=false;pointer.style.backgroundColor="";despawn();});this.anim=function(){funkce();pointer.style.backgroundColor="";field.clearObject(position[0],position[1]);}}else{var timeout=setTimeout(despawn,fadeInterval);this.anim=function(){clearTimeout(timeout);field.clearObject(position[0],position[1]);}}}
if(what===superFood)
bonusFoodSpawned.warp=function(){var warp=function(){oldMissPenalization=missPenalization;field.spawn(position[0],position[1],bonusFood);pointer.style.backgroundColor="";AchievementBonusFoodFading=false;movesCounter=0;bonusFoodSpawned.extra=false;bonusFoodSpawned.anim=false;if(oldMissPenalization){AchievementsListener.check("missSuperFood");ScalingSystem.set(HELP);}
bonusFoodSpawned.lifetime=(missPenalization=Ego.find(bonusFoodSpawned.position).length*bonusFoodTolerance[3]())||bonusFoodSpawned.lifetime;bonusFoodSpawnMoves=calcBonusFoodSpawn(Ego.length+1);}
AchievementBonusFoodFading=true;if(this.anim instanceof Function){this.anim();this.anim=false;}
if(Graphics.ChangingColor===true){funkce=recolor(fadeInterval,foodColors[foodColorIndexes[superFood]],foodColors[foodColorIndexes[bonusFood]],function(color){pointer.style.backgroundColor=color;},warp);this.anim=function(){funkce();AchievementBonusFoodFading=false;pointer.style.backgroundColor="";}}
else{var timeout=setTimeout(warp,fadeInterval);this.anim=function(){clearTimeout(timeout);AchievementBonusFoodFading=false;bonusFoodSpawned.anim=false;}}}
break;}
case food:if(toss(legendFoodChance[2]())){what=legendFood;var OldRegularFoodSpawned=regularFoodSpawned,index=0;warp=function(){if(++index>=regularFoodSpawned.lifetime){field.movement.removeCallback(warp);regularFoodSpawned.warp();}};position=Ego.find().random();if(!position)return;fadeInterval=5*currInterval;regularFoodSpawned.position[0]=position[0];regularFoodSpawned.position[1]=position[1];pointer=field.getElement(position[0],position[1]);regularFoodSpawned=field.getObject(position[0],position[1]);regularFoodSpawned.position=position;regularFoodSpawned.lifetime=position[2]*bonusFoodTolerance[3]();regularFoodSpawned.legendary=true;regularFoodSpawned.remove=function(){field.movement.removeCallback(warp);if(reactionTimeout){clearTimeout(reactionTimeout);reactionTimeout=false;}
if(this.anim instanceof Function){this.anim();this.anim=false;}
field.clearObject(position[0],position[1]);regularFoodSpawned=OldRegularFoodSpawned;};regularFoodSpawned.warp=function(){var warp=function(){field.spawn(position[0],position[1],food);pointer.style.backgroundColor="";AchievementLegendFoodFading=false;field.clearObject(position[0],position[1]);regularFoodSpawned=OldRegularFoodSpawned;};AchievementLegendFoodFading=true;if(Graphics.ChangingColor===true){funkce=recolor(fadeInterval,foodColors[foodColorIndexes[legendFood]],foodColors[foodColorIndexes[food]],function(color){pointer.style.backgroundColor=color;},warp);this.anim=function(){funkce();AchievementLegendFoodFading=false;pointer.style.backgroundColor="";}}
else{var timeout=setTimeout(warp,fadeInterval);this.anim=function(){clearTimeout(timeout);AchievementLegendFoodFading=false;bonusFoodSpawned.anim=false;}}};field.spawn(position[0],position[1],what);Snake.cleanCache();reactionTimeout=setTimeout(function(){reactionTimeout=false;regularFoodSpawned.lifetime=Ego.find(regularFoodSpawned.position).length*bonusFoodTolerance[3]()||regularFoodSpawned.lifetime;field.movement.addCallback(warp);},reactionTime);}else{position=field.getFree().random();regularFoodSpawned.position[0]=position[0];regularFoodSpawned.position[1]=position[1];field.spawn(position[0],position[1],what);}
break;default:{position=field.getFree().random();field.spawn(position[0],position[1],what);}}};function toss(odds){return Math.random()<=odds;}
function newThread(f){setTimeout(f,1);};function getPos(obj){var curleft="getBoundingClientRect"in obj?obj.getBoundingClientRect():[0,0];if("getBoundingClientRect"in obj)
return[curleft.left-(Html.clientLeft||Body.clientLeft||0),curleft.top-(Html.clientTop||Body.clientTop||0)];if(obj.offsetParent)
while(obj.offsetParent){curleft[0]+=obj.offsetLeft;curleft[1]+=obj.offsetTop;obj=obj.offsetParent;}
else{if(obj.x)
curleft[0]+=obj.x;if(obj.y)
curleft[1]+=obj.y;}
return curleft;};function calculateEllipse(round,x,y,a,b,angle,steps){if(steps===null)
steps=36;var points=[];var beta=-angle.degToRad();var sinbeta=Math.sin(beta);var cosbeta=Math.cos(beta);for(var i=0;i<360;i+=360/steps){var alpha=i.degToRad();var sinalpha=Math.sin(alpha);var cosalpha=Math.cos(alpha);if(round)points.push([Math.round(x+(a*cosalpha*cosbeta-b*sinalpha*sinbeta)),Math.round(a*cosalpha*sinbeta+b*sinalpha*cosbeta)]);else points.push([x+(a*cosalpha*cosbeta-b*sinalpha*sinbeta),(a*cosalpha*sinbeta+b*sinalpha*cosbeta)]);}
return points;};var Cursor={Hide:function(){Html.className="noCursor";},Show:function(){Html.className="";}};var colorTransition=function(oldColor,newColor){this.input=[oldColor,newColor];this.oldColor=/#(.{2})(.{2})(.{2})/.exec(oldColor).slice(1);this.newColor=/#(.{2})(.{2})(.{2})/.exec(newColor).slice(1);this.oldColor.forEach(function(item,index,that){that[index]=parseInt(item,16);});this.newColor.forEach(function(item,index,that){that[index]=parseInt(item,16);});}
colorTransition.prototype.calc=function(ratio){if(ratio===0||ratio===1)
return this.input[ratio];var r=((this.oldColor[0]*1/ratio+this.newColor[0]*1/(1-ratio))/(1/(1-ratio)+1/ratio)).round().toString(16),g=((this.oldColor[1]*1/ratio+this.newColor[1]*1/(1-ratio))/(1/(1-ratio)+1/ratio)).round().toString(16),b=((this.oldColor[2]*1/ratio+this.newColor[2]*1/(1-ratio))/(1/(1-ratio)+1/ratio)).round().toString(16);if(r.length===1)r="0"+r;if(g.length===1)g="0"+g;if(b.length===1)b="0"+b;return"#"+r+g+b;};Array.prototype.removeByValue=Array.prototype.erase;Array.prototype.removeByLastValue=function(value){var index=this.lastIndexOf(value);return index!==-1?this.remove(index):this.length;};var addListener=!window.addEventListener?function(type,listener){document.body.attachEvent("on"+type,listener);}:function(type,listener){window.addEventListener(type,listener,false);},remListener=!window.removeEventListener?function(type,listener){document.body.detachEvent("on"+type,listener);}:function(type,listener){window.removeEventListener(type,listener,false);};Array.prototype.minArray=function(){var min=this.min(),array=[],index=0;do{if((index=this.indexOf(min,index))!==-1)
array.push(index);}while(index++>-1)
return array;};Array.prototype.maxArray=function(){var max=this.max(),array=[],index=0;do{if((index=this.indexOf(max,index))!==-1)
array.push(index);}while(index++>-1)
return array;};Array.prototype.each=function(callback,from,to){var length=this.length;if(callback instanceof Function===false||length===0)return this;if(from===undefined)
from=0;if(to===undefined)
to=from<0&&-from<length?0:length-1;if(from<0)
from=-from>=length?0:length+from;else if(from>length-1)
from=length-1;if(to<0)
to=-to>=length?(from>0?0:length-1):length+to;else if(to>length-1)
to=length-1;if(from>to)do{if(callback.call(this,this[from],from)===false)return false;}while(from--!==to)else if(from<to)do{if(callback.call(this,this[from],from)===false)return false;}while(from++!==to)else if(callback.call(this,this[from],from)===false)
return false;return this;};Number.prototype.group=function(comma,decimals){var delimit=comma==undefined?",":comma,size=decimals==undefined?3:decimals,temp="",prefix="",decimal="",that=this+"",j=0;if(this<0){prefix="-";that=that.slice(1);}
if(that.indexOf('.')>=0){decimal=that.slice(that.indexOf('.')+1);that=that.slice(0,that.indexOf('.'));}
for(var i=that.length-1;i>=0;i--){temp=that.charAt(i)+temp;if(((++j%size)==0)&&(i!=0))
temp=delimit+temp;}
return(prefix+temp);};function GUI(settings){if(!(this instanceof GUI))
return new GUI(settings);if(!(settings instanceof Object)||!(settings.createNode instanceof Function))
throw new Error("Provide the constructor with the createNode function!");var that=this,node,wrapper;this._private={data:{},node:undefined,show:settings.showNode,hide:settings.hideNode,hideCall:settings.hideCalled,updateColors:settings.updateColors,stickyText:{animation:undefined,wrapper:undefined}};this.status=GUI.HIDDEN;node=settings.createNode.call(this,this._private.data);wrapper=document.createElement("div");wrapper.className="absolutePositionedText GUI";cover(wrapper);wrapper.appendChild(node);this._private.node=node;this._private.stickyText.wrapper=wrapper;if(!this.constructor.instances.length){this.constructor.modules.forEach(function(module){if(module.enabled)
module.init(module.data);});}
this.constructor.instances.push(this);};GUI.HIDDEN=0;GUI.HIDING=1;GUI.APPEARING=2;GUI.VISIBLE=3;GUI.showingDelay=500,GUI.hidingDelay=500,GUI.instances=[];GUI.updateColors=function(){if(!this.instances.length)return;var args=arguments;this.modules.forEach(function(module){if(module.enabled&&module.static&&module.static.updateColors)
module.static.updateColors.call(GUI,module.data,args);});this.instances.forEach(function(GUInst){GUInst.updateColors(args);});};GUI.show=function(callback,additionalAttributes){if(!this.instances.length)return;var length=0,counter=0,listen=function(){if(++counter===length&&callback instanceof Function)
callback();};this.modules.forEach(function(module){if(module.enabled&&module.static&&module.static.show)
module.static.show.call(GUI,module.data,additionalAttributes);});this.instances.forEach(function(GUInst){if(GUInst.status!==GUI.VISIBLE){length++;GUInst.show(listen,additionalAttributes);}});};GUI.hide=function(callback,additionalAttributes){if(!this.instances.length)return;var length=0,counter=0,listen=function(){if(++counter===length&&callback instanceof Function)
callback();};this.modules.forEach(function(module){if(module.enabled&&module.static&&module.static.hide)
module.static.hide.call(GUI,module.data,additionalAttributes);});this.instances.forEach(function(GUInst){if(GUInst.status!==GUI.HIDDEN){length++;GUInst.hide(listen,additionalAttributes);}});};GUI.prototype.updateColors=function(args){var that=this;if(this._private.updateColors instanceof Function)
this._private.updateColors.call(this,this._private.node,args,this._private.data);GUI.modules.forEach(function(module){if(module.enabled&&module.prototypal&&module.prototypal.updateColors)
module.prototypal.updateColors.call(that,module.data,that._private.node,args,that._private.data);});};GUI.prototype.show=function(callback,additionalAttributes){if(this.status===GUI.VISIBLE)return;var $=this._private.stickyText,that=this,startOpacity=this.status===GUI.HIDING||this.status===GUI.APPEARING?getOpacity($.wrapper):0,delay=GUI.showingDelay*(1-startOpacity/100);if(this.status===GUI.HIDDEN&&this._private.show)
this._private.show.call(this,this._private.node,additionalAttributes,this._private.data);GUI.modules.forEach(function(module){if(module.enabled&&module.prototypal&&module.prototypal.show)
module.prototypal.show.call(that,module.data,that._private.node,additionalAttributes,that._private.data);});if(startOpacity===0)canvas.appendChild($.wrapper);if($.animation)$.animation();this.status=GUI.APPEARING;$.wrapper.style.left=String(Screen.clientDimensions[0]/2-$.wrapper.offsetWidth/2)+"px";$.wrapper.style.top=String(Screen.clientDimensions[1]/2-$.wrapper.offsetHeight/2)+"px";if(Graphics.Transparency)
$.animation=retransparent($.wrapper,delay,startOpacity,100,function(){delete $.animation;that.status=GUI.VISIBLE;if(callback instanceof Function)
callback();});else{uncover($.wrapper);this.status=GUI.VISIBLE;if(callback instanceof Function)
callback();}};GUI.prototype.hide=function(callback,additionalAttributes){if(this.status===GUI.HIDDEN)return;var $=this._private.stickyText,that=this,startOpacity=this.status===GUI.APPEARING||this.status===GUI.HIDING?getOpacity($.wrapper):100,delay=GUI.hidingDelay*startOpacity/100,finish=function(){if(that._private.hide instanceof Function)
that._private.hide.call(that,that._private.node,additionalAttributes,that._private.data);canvas.removeChild($.wrapper);};if(this._private.hideCall)
this._private.hideCall.call(this,this._private.node,additionalAttributes,this._private.data);GUI.modules.forEach(function(module){if(module.enabled&&module.prototypal&&module.prototypal.hide)
module.prototypal.hide.call(that,module.data,that._private.node,additionalAttributes,that._private.data);});if($.animation)$.animation();this.status=GUI.HIDING;if(Graphics.Transparency)
$.animation=retransparent($.wrapper,delay,startOpacity,0,function(){delete $.animation;finish();that.status=GUI.HIDDEN;if(callback instanceof Function)
callback();});else{finish();this.status=GUI.HIDDEN;if(callback instanceof Function)
callback();}};function ScoreNode(){if(!(this instanceof ScoreNode))
return new ScoreNode;var node=document.createDocumentFragment(),txt=document.createElement("span"),span=document.createElement("span"),colors=this.constructor.getScoreColors();span[textContent]=(score>=1000?score.group():score);span.style.color=colors[0];if(Graphics.TextGlowEffects)
setGlow(span,GlowMagnitude,colors[1]);txt[textContent]=l[1];txt.style.fontVariant="small-caps";node.appendChild(txt);node.appendChild(span);this.node=node;this.span=span;};ScoreNode.prototype.update=function(resetEffects){var colors=this.constructor.getScoreColors();this.span[textContent]=(score>=1000?score.group():score);this.span.style.color=colors[0];if(Graphics.TextGlowEffects)
setGlow(this.span,GlowMagnitude,colors[1]);else if(resetEffects)
setGlow(this.span,0,colors[1]);};ScoreNode.getScoreColors=function(){if(eatenLegendFood)return scoreColors[5];if(score<scoreColorTresholds[0])return scoreColors[0];if(score>=scoreColorTresholds[0]&&score<scoreColorTresholds[1])return scoreColors[1];if(score>=scoreColorTresholds[1]&&score<scoreColorTresholds[2])return scoreColors[2];if(score>=scoreColorTresholds[2]&&score<scoreColorTresholds[3])return scoreColors[3];if(score>=scoreColorTresholds[3]&&score<scoreColorTresholds[4])return scoreColors[4];if(score>=scoreColorTresholds[4]&&score<maxScore)return scoreColors[5];return scoreColors[6];};GUI.modules=[{enabled:CSSFilters||CSSOpacity,data:{veil:document.createElement("div"),veilOpacity:40,status:GUI.HIDDEN,show:function($){if($.status===GUI.VISIBLE)return;if(!Graphics.Transparency||!Graphics.Veil||!Graphics.VeilAnimation){$.status=GUI.VISIBLE;if(Graphics.Transparency&&Graphics.Veil&&!Graphics.VeilAnimation)
setOpacity($.veil,$.veilOpacity);return;}
var startOpacity=$.status===GUI.HIDDEN?0:getOpacity($.veil),delay=GUI.showingDelay*(1-startOpacity/$.veilOpacity);if($.status===GUI.HIDDEN)
canvas.appendChild($.veil);if($.anim)$.anim();$.status=GUI.APPEARING;$.anim=retransparent($.veil,delay,startOpacity,$.veilOpacity,function(){delete $.anim;$.status=GUI.VISIBLE;});},hide:function($){if($.status===GUI.HIDDEN)return;if(!Graphics.Transparency||!Graphics.Veil||!Graphics.VeilAnimation){$.status=GUI.HIDDEN;if(Graphics.Transparency&&Graphics.Veil&&!Graphics.VeilAnimation)
cover($.veil);return;}
var startOpacity=$.status===GUI.VISIBLE?$.veilOpacity:getOpacity($.veil),delay=GUI.showingDelay*startOpacity/$.veilOpacity;if($.anim)$.anim();$.status=GUI.HIDING;$.anim=retransparent($.veil,delay,startOpacity,0,function(){delete $.anim;canvas.removeChild($.veil);$.status=GUI.HIDDEN;});}},init:function($){$.veil.className="veil";$.veil.style.backgroundColor=veilColor;if(Graphics.Transparency&&Graphics.Veil){setOpacity($.veil,$.veilOpacity);canvas.appendChild($.veil);$.status=GUI.VISIBLE;}else{cover($.veil);}},static:{updateColors:function($,params){var updateColors=params[0];$.veil.style.backgroundColor=veilColor;if(updateColors){if($.status!==GUI.HIDDEN){if(!Graphics.Transparency||!Graphics.Veil){if(covered($.veil))return;if($.anim)$.anim();if($.status===GUI.APPEARING)
$.status=GUI.VISIBLE;else if($.status===GUI.HIDING)
$.status=GUI.HIDDEN;cover($.veil);canvas.removeChild($.veil);}else if(covered($.veil)){setOpacity($.veil,$.veilOpacity);canvas.appendChild($.veil);}else if(!Graphics.VeilAnimation){if($.anim)$.anim();if($.status!==GUI.VISIBLE)
setOpacity($.veil,$.veilOpacity);}}else if(Graphics.Transparency&&Graphics.Veil)
cover($.veil);}},show:function($){$.show($);},hide:function($){$.hide($);}},prototypal:{show:function($){var length=GUI.instances.length;GUI.instances.forEach(function(GUInst){if(GUInst.status===GUI.HIDDEN||GUInst.status===GUI.HIDING)length--;});if(!length)$.show($);},hide:function($){var length=GUI.instances.length;GUI.instances.forEach(function(GUInst){if(GUInst.status===GUI.HIDDEN||GUInst.status===GUI.HIDING)length--;});if(length===1)$.hide($);}}}];var Menu,Pause;function GUIInit(){Menu=new GUI({createNode:function(data,params){var fragment=document.createElement("span"),space=document.createTextNode("\u00A0"),speedText=document.createElement("span"),fxText=document.createElement("span"),br=document.createElement("br"),speedNode=document.createElement("span"),intervals=new Array(2),that=this,speedFs={decrease:function(){if(speed===speeds[0])return;speedNode[textContent]="0"+(--speed);data.applyColors();if(storage)speedFs.record();},increase:function(){if(speed===speeds[2])return;speedNode[textContent]=(++speed>=10?"":"0")+speed;data.applyColors();if(storage)speedFs.record();},record:function(){if(speed!==speeds[1])
storage.setItem("speed",speed);else storage.removeItem("speed");}};data.pressAny=document.createElement("span");data.listener=new Listener(enter,false,function(){keyUp(LEFT);keyUp(RIGHT);that.hide();});data.sListener=new PressAndRelease([left,up,right,down],keyDown,keyUp);function keyDown(item){if(that.status!==GUI.VISIBLE)return;switch(item){case LEFT:case DOWN:if(intervals[0]!==undefined)return;intervals[0]=setInterval(speedFs.decrease,SpeedsCarouselVelocity);return speedFs.decrease();case RIGHT:case UP:if(intervals[1]!==undefined)return;intervals[1]=setInterval(speedFs.increase,SpeedsCarouselVelocity);return speedFs.increase();}};function keyUp(item){if(that.status!==GUI.VISIBLE)return;switch(item){case LEFT:case DOWN:if(intervals[0]===undefined)return;clearInterval(intervals[0]);return delete intervals[0];case RIGHT:case UP:if(intervals[1]===undefined)return;clearInterval(intervals[1]);return delete intervals[1];}};data.applyColors=function(resetEffects){var color=Graphics.TextGlowEffects?[]:undefined;if(speed>speeds[0]){if(Graphics.Transparency)setOpacity(data.left,((speed-speeds[0])/(speeds[2]-speeds[0]))*100);else{if(covered(data.left))uncover(data.left);else if(resetEffects)setOpacity(data.left,100);}}else{keyUp(LEFT);cover(data.left);}
if(speed<speeds[2]){if(Graphics.Transparency)setOpacity(data.right,(1-(speed-speeds[0])/(speeds[2]-speeds[0]))*100);else{if(covered(data.right))uncover(data.right);else if(resetEffects)setOpacity(data.right,100);}}else{keyUp(RIGHT);cover(data.right);}
switch(Graphics){case Profiles[0]:data.fx.low.style.color=scoreColors[0][0];data.fx.med.style.color=scoreColors[0][0];data.fx.hig.style.color=speedColors[2][0];setGlow(data.fx.low,0,speedColors[0][1]);setGlow(data.fx.med,0,speedColors[1][1]);if(Graphics.TextGlowEffects)
setGlow(data.fx.hig,GlowMagnitude,speedColors[2][1]);break;case Profiles[1]:data.fx.low.style.color=scoreColors[0][0];data.fx.med.style.color=speedColors[1][0];data.fx.hig.style.color=scoreColors[0][0];setGlow(data.fx.low,0,speedColors[0][1]);setGlow(data.fx.hig,0,speedColors[2][1]);if(Graphics.TextGlowEffects)
setGlow(data.fx.med,GlowMagnitude,speedColors[1][1]);break;case Profiles[2]:data.fx.low.style.color=speedColors[0][0];data.fx.med.style.color=scoreColors[0][0];data.fx.hig.style.color=scoreColors[0][0];setGlow(data.fx.med,0,speedColors[1][1]);setGlow(data.fx.hig,0,speedColors[2][1]);if(Graphics.TextGlowEffects)
setGlow(data.fx.low,GlowMagnitude,speedColors[0][1]);}
if(speed===speeds[0]){if(Graphics.TextGlowEffects){color=speedColors[0];}else color=speedColors[0][0];}else if(speed>speeds[0]&&speed<speeds[1]){if(Graphics.TextGlowEffects){color[0]=data.colorTransitions[0].calc((speed-speeds[0])/(speeds[1]-speeds[0]));color[1]=data.colorTransitions[2].calc((speed-speeds[0])/(speeds[1]-speeds[0]));}else color=data.colorTransitions[0].calc((speed-speeds[0])/(speeds[1]-speeds[0]));}else if(speed===speeds[1]){if(Graphics.TextGlowEffects){color=speedColors[1];}else color=speedColors[1][0];}else if(speed>speeds[1]&&speed<speeds[2]){if(Graphics.TextGlowEffects){color[0]=data.colorTransitions[1].calc((speed-speeds[1])/(speeds[2]-speeds[1]));color[1]=data.colorTransitions[3].calc((speed-speeds[1])/(speeds[2]-speeds[1]));}else color=data.colorTransitions[1].calc((speed-speeds[1])/(speeds[2]-speeds[1]));}else{if(Graphics.TextGlowEffects){color=speedColors[2];}else color=speedColors[2][0];}
speedNode.style.color=Graphics.TextGlowEffects?color[0]:color;if(Graphics.TextGlowEffects)
setGlow(speedNode,GlowMagnitude,color[1]);else if(resetEffects)
setGlow(speedNode,0,color[1]);}
data.anim=function(visible){var clear=retransparent(data.pressAny,1000,visible?90:30,visible?30:90,function(){data.anim(!visible);},true);data.clearAnim=function(){delete data.clearAnim;clear();};};data.scoreObj=new ScoreNode;data.scoreHidden=true;data.scoreNode=data.emptyScoreNode=document.createTextNode("");data.fullScoreNode=(function(){var node=document.createDocumentFragment(),score=data.scoreObj.node,brWrapper=document.createElement("span"),br=document.createElement("br");brWrapper.style.fontSize=length*drawTextMultiplier*0.4;brWrapper.appendChild(br.cloneNode(false));node.appendChild(score);node.appendChild(br);node.appendChild(brWrapper);return node;})();fxText[textContent]=l[16];speedText[textContent]=l[0];fxText.style.fontVariant=speedText.style.fontVariant=data.pressAny.style.fontVariant="small-caps";data.pressAny[textContent]=l[2];speedNode[textContent]=(speed===10?"":"0")+speed;data.left=document.createElement("span");data.right=document.createElement("span");data.fx={hig:document.createElement("sup"),med:document.createElement("span"),low:document.createElement("sub")};data.fx.hig[textContent]=l[17];data.fx.med[textContent]=l[18];data.fx.low[textContent]=l[19];data.fx.hig.onclick=function(){if(Graphics!==Profiles[0]){Graphics=Profiles[0];GUI.updateColors(true);if(storage)storage.removeItem("fx");}};data.fx.med.onclick=function(){if(Graphics!==Profiles[1]){Graphics=Profiles[1];GUI.updateColors(true);if(storage)storage.setItem("fx",1);}};data.fx.low.onclick=function(){if(Graphics!==Profiles[2]){Graphics=Profiles[2];GUI.updateColors(true);if(storage)storage.setItem("fx",2);}};data.left[textContent]="<";data.right[textContent]=">";data.left.style.color=data.right.style.color=sTextColors[4][0];data.fx.hig.style.cursor=data.fx.med.style.cursor=data.fx.low.style.cursor=data.left.style.cursor=data.right.style.cursor="pointer";data.left.onselectstart=right.onselectstart=function(e){e=e||event;e.returnValue=false;return false;};data.left.onmousedown=function(e){keyDown(LEFT);return(e||event).returnValue=false;};data.left.onmouseup=function(e){keyUp(LEFT);(e||event).returnValue=false;return false;};data.right.onmousedown=function(e){keyDown(RIGHT);(e||event).returnValue=false;return false;};data.right.onmouseup=function(e){keyUp(RIGHT);return(e||event).returnValue=false;};if(Graphics.TextGlowEffects){setGlow(data.left,GlowMagnitude,sTextColors[4][1]);setGlow(data.right,GlowMagnitude,sTextColors[4][1]);}
data.colorTransitions=[new colorTransition(speedColors[0][0],speedColors[1][0]),new colorTransition(speedColors[1][0],speedColors[2][0]),new colorTransition(speedColors[0][1],speedColors[1][1]),new colorTransition(speedColors[1][1],speedColors[2][1])];data.applyColors();fragment.style.fontSize=(drawTextMultiplier*length)+"px";fragment.style.color=sTextColors[0][0];if(Graphics.TextGlowEffects){setGlow(fragment,GlowMagnitude,sTextColors[0][1]);setGlow(data.left,GlowMagnitude,sTextColors[4][1]);setGlow(data.right,GlowMagnitude,sTextColors[4][1]);}
fragment.appendChild(data.scoreNode);fragment.appendChild(speedNode);fragment.appendChild(data.left);fragment.appendChild(space.cloneNode(false));fragment.appendChild(speedText);fragment.appendChild(speedNode);fragment.appendChild(space.cloneNode(false));fragment.appendChild(data.right);fragment.appendChild(br);fragment.appendChild(fxText);fragment.appendChild(data.fx.low);fragment.appendChild(data.fx.med);fragment.appendChild(data.fx.hig);fragment.appendChild(br.cloneNode(false));fragment.appendChild(data.pressAny);return fragment;},updateColors:function(node,params,data){var resetEffects=params[0];data.colorTransitions=[new colorTransition(speedColors[0][0],speedColors[1][0]),new colorTransition(speedColors[1][0],speedColors[2][0]),new colorTransition(speedColors[0][1],speedColors[1][1]),new colorTransition(speedColors[1][1],speedColors[2][1])];data.left.style.color=sTextColors[4][0];data.right.style.color=sTextColors[4][0];node.style.color=sTextColors[0][0];if(Graphics.TextGlowEffects){setGlow(node,GlowMagnitude,sTextColors[0][1]);setGlow(data.left,GlowMagnitude,sTextColors[4][1]);setGlow(data.right,GlowMagnitude,sTextColors[4][1]);}else if(resetEffects){setGlow(node,0,sTextColors[0][1]);setGlow(data.left,0,sTextColors[4][1]);setGlow(data.right,0,sTextColors[4][1]);}if(resetEffects){if(this.status!==GUI.HIDDEN&&this.status!==GUI.HIDING){if(!Graphics.Transparency){if(data.clearAnim)data.clearAnim();}
else if(!data.clearAnim)data.anim(true);}if(!Graphics.Transparency&&getOpacity(data.pressAny)!==100){setOpacity(data.pressAny,100);}}
data.applyColors(resetEffects);data.scoreObj.update(true);},hideCalled:function(node,additionalAttributes,data){data.listener.stopListening();data.sListener.stopListening();if(data.callback&&!switchingModes)data.callback();},hideNode:function(node,additionalAttributes,data){if(data.clearAnim)data.clearAnim();},showNode:function(node,additionalAttributes,data){if(additionalAttributes&&additionalAttributes.callback!==undefined)
data.callback=additionalAttributes.callback;data.listener.startListening();data.sListener.startListening();if(Graphics.Transparency)data.anim(true);if(additionalAttributes&&additionalAttributes.showScore!==undefined){if(additionalAttributes.showScore)
data.scoreObj.update();if(data.scoreHidden&&additionalAttributes.showScore){node.replaceChild(data.fullScoreNode,data.emptyScoreNode);data.scoreHidden=false;}else if(!data.scoreHidden&&!additionalAttributes.showScore){node.replaceChild(data.emptyScoreNode,data.fullScoreNode);data.scoreHidden=true;}}}});Pause=new GUI({createNode:function(data){data.scoreObj=new ScoreNode;var fragment=document.createElement("span"),header=document.createTextNode(l[5]),br=document.createElement("br"),score=data.scoreObj.node;data.twiddle=document.createElement("span");data.twiddle[textContent]="~";data.twiddle.style.color=sTextColors[5][0];fragment.style.fontSize=(drawTextMultiplier*length)+"px";fragment.style.color=sTextColors[0][0];if(Graphics.TextGlowEffects){setGlow(fragment,GlowMagnitude,sTextColors[0][1]);setGlow(data.twiddle,GlowMagnitude,sTextColors[5][1]);}
data.twinTwiddle=data.twiddle.cloneNode(true);fragment.appendChild(data.twiddle);fragment.appendChild(header);fragment.appendChild(data.twinTwiddle);fragment.appendChild(br);fragment.appendChild(score);return fragment;},showNode:function(node,attributes,data){data.scoreObj.update();},updateColors:function(node,params,data){var formerTwinTwiddle=data.twinTwiddle,resetEffects=params[0];data.scoreObj.update(resetEffects);node.style.color=sTextColors[0][0];data.twiddle.style.color=sTextColors[5][0];if(Graphics.TextGlowEffects){setGlow(node,GlowMagnitude,sTextColors[0][1]);setGlow(data.twiddle,GlowMagnitude,sTextColors[5][1]);}else if(resetEffects){setGlow(node,0,sTextColors[0][1]);setGlow(data.twiddle,0,sTextColors[5][1]);}
data.twinTwiddle=data.twiddle.cloneNode(true);node.replaceChild(data.twinTwiddle,formerTwinTwiddle);}});};var setOpacity,getOpacity,setGlow,setAngle;if(CSSFilters&&!(CSSTransform&&CSSOpacity)){setGlow=function(element,strength,color){var filter=element.style.filter.length===0?false:element.filters["DXImageTransform.Microsoft.Glow"];if(filter)
element.style.filter=element.style.filter.replace(/(progid:DXImageTransform\.Microsoft\.Glow\(color=).*(,strength=)\d*(\))/,strength>0?"$1"+color+"$2"+strength+"$3":"");else if(strength!==0){element.style.filter+="progid:DXImageTransform.Microsoft.Glow(color="+color+",strength="+strength+")";}};setAngle=function(element,angle){var sin,cos,filter=element.style.filter.length===0?false:element.filters["DXImageTransform.Microsoft.Matrix"];angle=angle.degToRad().radAdjust();sin=angle.sin();cos=angle.cos();if(filter){element.style.filter=element.style.filter.replace(/(progid:DXImageTransform\.Microsoft\.Matrix\(M11=)-?.*(,M12=)-?.*(,M21=)-?.*(,M22=)-?.*(,sizingMethod='auto expand'\))/,angle!==0?"$1"+cos+"$2"+(-sin)+"$3"+sin+"$4"+cos+"$5":"");}else if(angle!==0){element.style.filter+="progid:DXImageTransform.Microsoft.Matrix(M11="+cos+",M12="+(-sin)+",M21="+sin+",M22="+cos+",sizingMethod='auto expand')";}};setOpacity=function(element,opacity,dontChangeVisibility){var filter=element.style.filter.length===0?false:element.filters["DXImageTransform.Microsoft.Alpha"];opacity=opacity.round();if(filter){element.style.filter=element.style.filter.replace(/(progid:DXImageTransform\.Microsoft\.Alpha\(opacity=)\d*(\.\d*)?(\))/,opacity!==0&&opacity!==100?"$1"+opacity+"$3":"");}else if(opacity!==0&&opacity!==100)
element.style.filter+="progid:DXImageTransform.Microsoft.Alpha(opacity="+opacity+")";if(!dontChangeVisibility){if(opacity){if(covered)uncover(element);}else{if(!covered)cover(element);}}};getOpacity=function(element){return(element.filters["DXImageTransform.Microsoft.Alpha"]&&element.filters["DXImageTransform.Microsoft.Alpha"].opacity)||(element.style.visibility=="hidden"?0:100);};}else if(CSSTransform&&CSSOpacity){setAngle=function(element,angle){if(angle<0)angle=angle%360+360
if(angle>=360)angle%=360;if(angle!=0){element.style.transform="rotate("+angle+"deg)";element.style.WebkitTransform="rotate("+angle+"deg)";element.style.MozTransform="rotate("+angle+"deg)";element.style.OTransform="rotate("+angle+"deg)";}else{element.style.transform="";element.style.WebkitTransform="";element.style.MozTransform="";element.style.OTransform="";}};setGlow=function(element,strength,color){if(strength>0)
element.style.textShadow=color+" 0px 0px "+strength+"px";else element.style.textShadow="";};setOpacity=function(element,opacity,dontChangeVisibility){if(dontChangeVisibility||opacity>0){if(!dontChangeVisibility&&covered(element))uncover(element);element.style.opacity=opacity===100?"":opacity/100;}else{cover(element);if(element.style.opacity)
element.style.opacity="";}};getOpacity=function(element){if(element.style.visibility=="hidden")return 0;else if(element.style.opacity)
return element.style.opacity*100;else return 100;};}
var show=function(element){element.style.display="";return true;};var hide=function(element){element.style.display="none";return true;};var cover=function(element){element.style.visibility="hidden";return true;};var uncover=function(element){element.style.visibility="";return true;};var shown=function(element){return element.style.display!=="none"&&element.style.visibility!=="hidden";};var hidden=function(element){return element.style.display==="none";};var covered=function(element){return element.style.visibility==="hidden";};function rotate(object,time,startDeg,finalDeg,callback){var calls=[];var ticks=Math.round(time/(1000/Graphics.FramesPerSecond));var delta=finalDeg-startDeg;var diff=delta/ticks;for(var index=0;index<=ticks;index++){(function(index){calls.push(setTimeout(function(){var result=index===ticks?finalDeg:startDeg+diff*index;setAngle(object,result);if(index===ticks&&callback instanceof Function)callback();},index*(1000/Graphics.FramesPerSecond)));})(index);}
return function(){calls.forEach(function(call){clearTimeout(call);});}}
function move(object,time,x,y,x2,y2,regardWindow,callback){if(object.style.position!=="absolute")object.style.position="absolute";var calls=[];var ticks=Math.round(time/(1000/Graphics.FramesPerSecond));var delta=[x2-x,y2-y];var diff=[delta[0]/ticks,delta[1]/ticks];var previous=[false,false];for(var index=0;index<=ticks;index++){if(previous[0]!==(index===ticks?x2:Math.round(x+diff[0]*index))||previous[1]!==(index===ticks?y2:Math.round(y+diff[1]*index)))(function(index){calls.push(setTimeout(function(){if(index===ticks){previous=[x2,y2];}else{previous=[Math.round(x+diff[0]*index),Math.round(y+diff[1]*index)];if(regardWindow){if(previous[0]+object.offsetWidth>Screen.clientDimensions[0]){previous[0]=Screen.clientDimensions[0]-object.offsetWidth-(TextShadows?3:0);}else if(previous[0]<0){previous[0]=0;}if(previous[1]+object.offsetHeight>Screen.clientDimensions[1]){previous[1]=Screen.clientDimensions[1]-object.offsetHeight-(TextShadows?3:0);}else if(previous[1]<0){previous[1]=0;}}}
object.style.left=String(previous[0])+"px";object.style.top=String(previous[1])+"px";if(index===ticks&&callback instanceof Function)callback();},index*(1000/Graphics.FramesPerSecond)));})(index);}
return function(){calls.forEach(function(call){clearTimeout(call);});}}
function textMove(object,time,x,y,x2,y2,shadow,regardWindow,callback){if(object.style.position!=="absolute")object.style.position="absolute";var calls=[];var ticks=Math.round(time/(1000/Graphics.FramesPerSecond));var delta=[x2-x,y2-y];var diff=[delta[0]/ticks,delta[1]/ticks];var previous=[false,false];for(var index=0;index<=ticks;index++){if(previous[0]!==(index===ticks?x2:Math.round(x+diff[0]*index))||previous[1]!==(index===ticks?y2:Math.round(y+diff[1]*index)))(function(index){calls.push(setTimeout(function(){if(index===ticks){previous=[x2,y2];}else{previous=[Math.round(x+diff[0]*index),Math.round(y+diff[1]*index)];if(regardWindow){if(previous[0]+object.offsetWidth+(shadow?shadow/2:0)>Screen.clientDimensions[0]){previous[0]=Screen.clientDimensions[0]-object.offsetWidth-(shadow?shadow/2:0);}else if(previous[0]<(shadow?shadow/2:0)){previous[0]=shadow?shadow/2:0;}if(previous[1]+object.offsetHeight+(shadow?shadow/2:0)>Screen.clientDimensions[1]){previous[1]=Screen.clientDimensions[1]-object.offsetHeight-(shadow?shadow/2:0);}else if(previous[1]<(shadow?shadow/2:0)){previous[1]=shadow?shadow/2:0;}}}
object.style.left=String(previous[0])+"px";object.style.top=String(previous[1])+"px";if(index===ticks&&callback instanceof Function)callback();},index*(1000/Graphics.FramesPerSecond)));})(index);}
return function(){calls.forEach(function(call){clearTimeout(call);});}}
function textResize(object,time,oldsize,newsize,partialCallback,callback){var calls=[];var ticks=Math.round(time/(1000/Graphics.FramesPerSecond));var delta=newsize-oldsize;var diff=delta/ticks;var last=0;var lastTooBig=false;var previous=false;for(var index=0;index<=ticks;index++){if(previous!==(index===ticks?newsize:Math.round(oldsize+diff*index)))(function(index){calls.push(setTimeout(function(){previous=index===ticks?newsize:Math.round(oldsize+diff*index);var left=object.style.position==="absolute"?Number(object.style.left.replace("px","")):0;var top=object.style.position==="absolute"?Number(object.style.top.replace("px","")):0;if(object.offsetWidth+left<Screen.clientDimensions[0]&&object.offsetHeight+top<Screen.clientDimensions[1]&&(previous<last||!lastTooBig)){object.style.fontSize=String(previous)+"px";if(object.offsetWidth+left>Screen.clientDimensions[0]||object.offsetHeight+top>Screen.clientDimensions[1]){object.style.fontSize=String(last)+"px";lastTooBig=true;}else{last=previous;if(lastTooBig)lastTooBig=false;}}
if(index===ticks){if(callback instanceof Function)callback();}else{if(partialCallback instanceof Function)partialCallback();}},index*(1000/Graphics.FramesPerSecond)));})(index);}
return function(){calls.forEach(function(call){clearTimeout(call);});}}
function recolor(time,oldcolor,newcolor,partialCallback,callback){var calls=[],ticks=Math.round(time/(1000/Graphics.FramesPerSecond)),transition=new colorTransition(oldcolor,newcolor),previous;for(var index=1;index<=ticks;index++){if(previous!==(previous=transition.calc(index/ticks)))(function(index,color){calls.push(setTimeout(function(){if(partialCallback instanceof Function)partialCallback(color);if(index===ticks&&callback instanceof Function)callback();},index*(1000/Graphics.FramesPerSecond)));})(index,previous);else if(ticks===index&&callback instanceof Function)
calls.push(setTimeout(callback,index*(1000/Graphics.FramesPerSecond)));}
return function(){calls.forEach(function(call){clearTimeout(call);});}}
function resize(object,time,oldwidth,oldheight,newwidth,newheight,regardWindow,callback){var calls=[];if(regardWindow){if(oldwidth>Body.clientWidth){oldheight=Math.round(((Body.clientWidth)/oldwidth)*oldheight);oldwidth=Math.round(body.clientWidth);}
if(newwidth>Body.clientWidth){newheight=Math.round(((Body.clientWidth)/newwidth)*newheight);newwidth=Math.round(Body.clientWidth);}}
var ticks=Math.round(time/(1000/Graphics.FramesPerSecond));var delta=[newwidth-oldwidth,newheight-oldheight];var diff=[delta[0]/ticks,delta[1]/ticks];var previous=[false,false];for(var index=0;index<=ticks;index++){if(previous[0]!==(index===ticks?newwidth:Math.round(oldwidth+diff[0]*index))||previous[1]!==(index===ticks?newheight:Math.round(oldheight+diff[1]*index)))(function(index){calls.push(setTimeout(function(){previous=[(index===ticks?newwidth:Math.round(oldwidth+diff[0]*index)),(index===ticks?newheight:Math.round(oldheight+diff[1]*index))];object.style.width=String(previous[0])+"px";object.style.height=String(previous[1])+"px";if(index===ticks&&callback instanceof Function)callback();},index*(1000/Graphics.FramesPerSecond)));})(index);}
return function(){calls.forEach(function(call){clearTimeout(call);});}}
function size(object,width,height,regardWindowWidth,regardWindowHeight){if(!(object instanceof Object))object=document.getElementById(object);if(!object)if(callback instanceof Function)callback();if(regardWindowWidth&&width>Body.clientWidth){height=Math.round(((Body.clientWidth)/width)*height);width=Math.round(Body.clientWidth);}
if(regardWindowHeight&&height>Body.clientHeight){width=Math.round(((Body.clientHeight)/height)*width);height=Body.clientHeight;}
object.style.width=String(Math.round(width))+"px";object.style.height=String(Math.round(height))+"px";}
function retransparent(object,time,transparency_start,transparency_end,callback,dontChangeVisibility){var calls=[];var ticks=Math.round(time/(1000/Graphics.FramesPerSecond));var delta=transparency_end-transparency_start;var diff=delta/ticks;var previous=false;for(var index=0;index<=ticks;index++){if(Math.floor(transparency_start+(index*diff))!==previous||index===ticks){(function(index){calls.push(setTimeout(function(){var opacity;if(index===ticks)opacity=transparency_end;else opacity=transparency_start+(index*diff);if(opacity>0){setOpacity(object,opacity,dontChangeVisibility);}else{if(dontChangeVisibility)
setOpacity(object,0,dontChangeVisibility);else{setOpacity(object,100,dontChangeVisibility);cover(object);}}
if(index===ticks&&callback instanceof Function)callback();},index*(1000/Graphics.FramesPerSecond)));})(index);previous=Math.floor(transparency_start+(index*diff));}}
return function(){calls.forEach(function(call){clearTimeout(call);});}}
var Profiles=[{FramesPerSecond:60,Transparency:CSSFilters||CSSOpacity,TextGlowEffects:CSSFilters||CSSGlow,FullscreenEffects:true,ResizingTexts:true,RotatingObjects:CSSFilters||CSSTransform,MovingObjects:true,ChangingColor:true,ModeSwitchAnimation:true,Veil:CSSFilters||CSSOpacity,VeilAnimation:CSSFilters||CSSOpacity,TransparencyOnSnakeText:CSSFilters||CSSOpacity,TextGlowEffectsOnSnakeAndCenterText:CSSFilters||CSSGlow,GlowTextHidingAndEnlarging:true},{FramesPerSecond:30,Transparency:CSSFilters||CSSOpacity,TextGlowEffects:CSSFilters||CSSGlow,FullscreenEffects:false,ResizingTexts:true,RotatingObjects:CSSFilters||CSSTransform,MovingObjects:true,ChangingColor:true,ModeSwitchAnimation:true,Veil:CSSFilters||CSSOpacity,VeilAnimation:false,TransparencyOnSnakeText:false,TextGlowEffectsOnSnakeAndCenterText:false,GlowTextHidingAndEnlarging:false},{FramesPerSecond:15,Transparency:false,TextGlowEffects:false,FullscreenEffects:false,ResizingTexts:false,RotatingObjects:false,MovingObjects:false,ChangingColor:true,ModeSwitchAnimation:false,Veil:false,VeilAnimation:false,TransparencyOnSnakeText:false,TextGlowEffectsOnSnakeAndCenterText:false,GlowTextHidingAndEnlarging:false}],Graphics=Profiles[storage?+storage.getItem("fx")||0:0],GlowMagnitude=4;function Achievements(){var array=[],prepare=function(object){object.repeat=object.repeat?1:0;if(object.count){var callback=object.callback;var count=0;object.callback=function(keyWord){callback(keyWord,count,function(value){count=value;});if(object.repeat&&(object.countTill||Infinity)>count)count++;}
var condition=object.condition;object.condition=function(keyWord){return condition(keyWord,count,function(value){count=value;});}}
array.push(object);}
this.attach=function(achievement){if(!(achievement instanceof Object))return;if(achievement.length)achievement.forEach(preparation);else preparation(achievement);function preparation(achievement){prepare({count:achievement.count,countTill:achievement.countTill,repeat:achievement.repeat,allowedKeyWords:achievement.allowedKeyWords,allowedKeyWordTypes:achievement.allowedKeyWordTypes,condition:achievement.condition,callback:achievement.callback});}}
this.detach=function(){array=[];}
this.reset=function(achievement){this.detach();this.attach(achievement);}
this.check=function(keyWord){array.forEach(function(entry){if(entry.repeat>=0&&(((entry.allowedKeyWords instanceof Array&&entry.allowedKeyWords.indexOf(keyWord)!==-1)||entry.allowedKeyWords===keyWord)||((entry.allowedKeyWordTypes instanceof Array&&entry.allowedKeyWordTypes.indexOf(typeof entry)!==-1)||entry.allowedKeyWordTypes===typeof keyWord))&&((entry.condition&&entry.condition(keyWord))||!entry.condition)){if(entry.repeat===0)entry.repeat--;entry.callback(keyWord);}});}}
var AchievementBonusFoodCollect=[0,0],AchievementSuperFoodCollect=[0,0],AchievementBonusFoodFading,AchievementLegendFoodFading,FirstCombo=true,DynamicAchievementsList=[],StaticAchievementsList=[{count:true,repeat:true,countTill:1,allowedKeyWords:"tailMiss",allowedKeyWordTypes:false,condition:function(){return eaten>5;},callback:function(keyWord,count,changeCountValue){if(!count){centerGrowDraw(500,2000,textColors[4],length/2,length*2.5,l[15]);}FullscreenGlow(currInterval*glowLengthRoot*1.25,gridColors[4],4);}},{count:false,repeat:false,allowedKeyWords:legendFood,allowedKeyWordTypes:false,callback:function(){centerGrowDraw(500,6000,textColors[5],length/2,length*3.2,l[14]);FullscreenGlow(currInterval*glowLengthRoot*3,gridColors[6],6);}},{count:false,repeat:false,allowedKeyWords:legendFood,allowedKeyWordTypes:false,condition:function(keyWord){return AchievementLegendFoodFading;},callback:function(keyWord,count,changeCountValue){centerGrowDraw(500,2000,textColors[5],length/2,length*2.5,l[12]);}},{count:true,repeat:true,countTill:1,allowedKeyWords:[bonusFood,superFood],allowedKeyWordTypes:false,condition:function(keyWord){return AchievementBonusFoodFading;},callback:function(keyWord,count,changeCountValue){if(!count){centerGrowDraw(500,2000,textColors[4],length/2,length*2,l[12]);}FullscreenGlow(currInterval*glowLengthRoot,gridColors[4],4);}},{count:true,repeat:false,allowedKeyWords:[bonusFood,superFood],allowedKeyWordTypes:false,condition:function(keyWord,count,changeCountValue){if(AchievementBonusFoodFading){if(count<4){changeCountValue(count+1);return false;}else return true;}else return false;},callback:function(keyWord,count,changeCountValue){centerGrowDraw(500,2500,textColors[4],length/2,length*2.5,l[13]);FullscreenGlow(currInterval*glowLengthRoot*1.25,gridColors[4],4);}},{count:true,repeat:false,allowedKeyWords:[food,bonusFood,superFood,"changeDirection"],allowedKeyWordTypes:false,condition:function(keyWord,count,changeCountValue){if(keyWord==="changeDirection"){changeCountValue(0);return false;}else{if(count===4)return true;else{changeCountValue(count+1);return false;}}},callback:function(keyWord,count,changeCountValue){centerGrowDraw(500,2500,textColors[4],length/2,length*3,l[9]);FullscreenGlow(currInterval*glowLengthRoot*1.25,gridColors[4],4);}},{count:true,repeat:false,allowedKeyWords:[food,bonusFood,superFood,"changeDirection"],allowedKeyWordTypes:false,condition:function(keyWord,count,changeCountValue){if(keyWord==="changeDirection"){changeCountValue(0);return false;}else{if(count===3)return true;else{changeCountValue(count+1);return false;}}},callback:function(keyWord,count,changeCountValue){centerGrowDraw(500,2500,textColors[4],length/2,length*2.7,l[8]);FullscreenGlow(currInterval*glowLengthRoot*1.25,gridColors[4],4);}},{count:true,repeat:false,allowedKeyWords:[food,bonusFood,superFood,"changeDirection"],allowedKeyWordTypes:false,condition:function(keyWord,count,changeCountValue){if(keyWord==="changeDirection"){changeCountValue(0);return false;}else{if(count===2)return true;else{changeCountValue(count+1);return false;}}},callback:function(keyWord,count,changeCountValue){centerGrowDraw(500,2500,textColors[4],length/2,length*2.5,l[7]);FullscreenGlow(currInterval*glowLengthRoot*1.25,gridColors[4],4);}},{count:true,repeat:true,allowedKeyWords:[food,bonusFood,superFood,"changeDirection"],allowedKeyWordTypes:false,condition:function(keyWord,count,changeCountValue){if(keyWord==="changeDirection"){changeCountValue(0);return false;}else{changeCountValue(count+1);return count>=1;}},callback:function(keyWord,count,changeCountValue){if(FirstCombo){centerGrowDraw(500,2000,textColors[4],length/2,length*2,l[6]);FirstCombo=false;}FullscreenGlow(currInterval*glowLengthRoot,gridColors[4],4);}},{count:false,repeat:false,allowedKeyWords:[bonusFood,superFood,"missBonusFood"],allowedKeyWordTypes:false,condition:function(keyWord){if(keyWord===bonusFood||keyWord===superFood){if(++AchievementBonusFoodCollect[0]===5)return true;else return false;}else if(keyWord==="missBonusFood"){if(AchievementBonusFoodCollect[0]>0)AchievementBonusFoodCollect[0]=0;return false;}else{return false;}},callback:function(keyWord){if(AchievementSuperFoodCollect[0]!=4){centerGrowDraw(500,2000,textColors[4],length/2,length*2,l[3]);FullscreenGlow(currInterval*glowLengthRoot,gridColors[4],4);}}},{count:false,repeat:false,allowedKeyWords:[superFood,"missSuperFood"],allowedKeyWordTypes:false,condition:function(keyWord){if(keyWord===superFood){if(++AchievementSuperFoodCollect[0]===5)return true;else return false;}else if(keyWord==="missSuperFood"){if(AchievementSuperFoodCollect[1]>0)AchievementSuperFoodCollect[0]=0;return false;}else{return false;}},callback:function(keyWord){centerGrowDraw(500,2500,textColors[4],length/2,length*2.5,l[4]);FullscreenGlow(currInterval*glowLengthRoot*1.25,gridColors[4],4);}},{count:false,repeat:false,allowedKeyWords:[bonusFood,superFood,"missBonusFood"],allowedKeyWordTypes:false,condition:function(keyWord){if(keyWord===bonusFood||keyWord===superFood){if(++AchievementBonusFoodCollect[1]===10)return true;else{return false;}}else if(keyWord==="missBonusFood"){if(AchievementBonusFoodCollect[1]>0)AchievementBonusFoodCollect[1]=0;return false;}else{return false;}},callback:function(keyWord){if(AchievementSuperFoodCollect[1]!=9){centerGrowDraw(500,2000,textColors[4],length/2,length*2.5,l[10]);FullscreenGlow(currInterval*glowLengthRoot,gridColors[4],4);}}},{count:false,repeat:false,allowedKeyWords:[superFood,"missSuperFood"],allowedKeyWordTypes:false,condition:function(keyWord){if(keyWord===superFood){if(++AchievementSuperFoodCollect[1]===9)return true;else return false;}else if(keyWord==="missSuperFood"){if(AchievementSuperFoodCollect[1]>0)AchievementSuperFoodCollect[1]=0;return false;}else{return false;}},callback:function(keyWord){centerGrowDraw(500,2500,textColors[4],length/2,length*3,l[11]);FullscreenGlow(currInterval*glowLengthRoot*1.25,gridColors[4],4);}}],ScoreAchievements=[{text:multi[0],colors:"adopt",sizeMultiplier:"adopt",delay:"adopt",treshold:{type:"score",amount:9000}},{text:[multi,1,9],colors:0,sizeMultiplier:2,delay:2000},{text:[multi,10,15],colors:1,sizeMultiplier:2,delay:2500},{text:[multi,16,26],colors:2,sizeMultiplier:2.5,delay:3000},{text:[multi,27,36],colors:3,sizeMultiplier:2.7,delay:5000},{text:[multi,37,46],colors:5,sizeMultiplier:3,delay:5000},{text:multi[47],colors:6,sizeMultiplier:3.2,delay:6000}];AchievementsListener=new Achievements();var DayTime=(function(){var DAWN=0,DUSK=1,DAY=0,NIGHT=1;var DayTime=function(latitude,longitude){if(latitude===undefined||longitude===undefined)
throw new Error("Define both the latitude and longitude!");this.latitude=latitude;this.longitude=longitude;this._private={listeners:[],events:[],eventsExistant:[]};var now=Date.now(),current=[this.get(DAWN),this.get(DUSK)],that=this,eventListener;current[0]=current[0]instanceof Date?current[0].getTime():-Infinity;current[1]=current[1]instanceof Date?current[1].getTime():Infinity;if(now>current[1])this.now=NIGHT;else if(now<current[1]&&now>current[0])this.now=DAY;else if(now<current[0])this.now=NIGHT;(eventListener=function(){var Event=that.closestEvent();if(Event!==false)
setTimeout(function(){that._private.listeners.forEach(function(listener){listener(Event[0]);});switch(Event[0]){case DAWN:that.now=DAY;break;case DUSK:that.now=NIGHT;break;}
eventListener();},Event[1]);})();};DayTime.DAWN=DAWN;DayTime.DUSK=DUSK;DayTime.DAY=DAY;DayTime.NIGHT=NIGHT;DayTime.prototype.toString=function(){return this.now===NIGHT?"Night":"Day";};DayTime.prototype.get=function(flag,suppliedDate){if(flag===undefined)throw"Provide the function flag!";var date=suppliedDate||new Date;if(flag in this._private.events&&this._private.events[flag].getDate()===date.getDate())
return this._private.eventsExistant[flag]?this._private.events[flag]:false;var latitude=this.latitude,longitude=this.longitude,zenith=90+50/60,month=date.getMonth()+1,year=date.getYear(),day=date.getDate(),dayOfYear=(275*month/9).floor()-(((month+9)/12).floor()*(1+((year-4*(year/4).floor()+2)/3).floor()))+day-30,longitudeHours=longitude/15,time=dayOfYear+(((flag===DAWN?6:18)-longitudeHours)/24),sunMeanAnomaly=(0.9856*time)-3.289,sunLongitude=(sunMeanAnomaly+(1.916*sunMeanAnomaly.degToRad().sin())+(0.020*(2*sunMeanAnomaly.degToRad()).sin())+282.634).degAdjust(),sunRightAscension=(function(){var RA=(0.91764*sunLongitude.degToRad().tan()).atan().radToDeg().degAdjust(),LQuadrant=(sunLongitude/90).floor()*90,RAQuadrant=(RA/90).floor()*90;return(RA+(LQuadrant-RAQuadrant))/15;})(),sunSinDeclination=0.39782*sunLongitude.degToRad().sin(),sunCosDeclination=sunSinDeclination.asin().cos(),sunLocalHourAngle=(zenith.degToRad().cos()-(sunSinDeclination*latitude.degToRad().sin()))/(sunCosDeclination*latitude.degToRad().cos()),hours,localMeanTime,localTime,UTC,dateObject,dateData;if((sunLocalHourAngle>1&&flag===DAWN)||(sunLocalHourAngle<-1&&flag===DUSK)){this._private.eventsExistant[flag]=false;return!(this._private.events[flag]=date);}
hours=(flag===DAWN?360-sunLocalHourAngle.acos().radToDeg():sunLocalHourAngle.acos().radToDeg())/15;localMeanTime=hours+sunRightAscension-(0.06571*time)-6.622;UTC=localMeanTime-longitudeHours;if(UTC<0)UTC=UTC%24+24;if(UTC>=24)UTC%=24;localTime=UTC-date.getTimezoneOffset()/60;dateData={};dateData.hours=localTime.floor();dateData.minutes=((localTime-dateData.hours)*60).floor();dateData.seconds=((localTime-dateData.hours-dateData.minutes/60)*3600).floor();dateData.mseconds=((localTime-dateData.hours-dateData.minutes/60-dateData.seconds/3600)*3600000).floor();dateObject=new Date(date);dateObject.setHours(dateData.hours);dateObject.setMinutes(dateData.minutes);dateObject.setSeconds(dateData.seconds);dateObject.setMilliseconds(dateData.mseconds);this._private.eventsExistant[flag]=true;return(this._private.events[flag]=dateObject);};DayTime.prototype.listen=function(f){if(f instanceof Function)
this._private.listeners.push(f);};DayTime.prototype.stopListening=function(f){this._private.listeners.removeByValue(f);};DayTime.prototype.closestEvent=function(){var now=Date.now(),tomorrow,current=[this.get(DAWN),this.get(DUSK)];current[0]=current[0]instanceof Date?current[0].getTime():-Infinity;current[1]=current[1]instanceof Date?current[1].getTime():-Infinity;if(now<current[0])return[DAWN,current[0]-now];if(now<current[1])return[DUSK,current[1]-now];tomorrow=new Date();tomorrow.setTime(now+86400000);current=[this.get(DAWN,tomorrow),this.get(DUSK,tomorrow)];current[0]=current[0]instanceof Date?current[0].getTime():-Infinity;current[1]=current[1]instanceof Date?current[1].getTime():-Infinity;if(now<current[0])return[DAWN,current[0]-now];if(now<current[1])return[DUSK,current[1]-now];return false;};return DayTime;})();var ScalingSystem=(function(){var currentState=0,help={increase:scalingSystemVars[0],decrease:scalingSystemVars[1]},skill={increase:scalingSystemVars[2],decrease:scalingSystemVars[3]},that={reset:function(){currentState=0;},set:function(what,howMuch){howMuch=howMuch||1;var coeff=speedCoeff[2]();switch(what){case HELP:if(currentState>0){if(currentState>skill.decrease*howMuch*coeff)
currentState-=skill.decrease*howMuch*coeff;else
currentState=0;}else{if(-currentState+help.increase*howMuch*coeff<10)
currentState-=help.increase*howMuch*coeff;else
currentState=-10;}
break;case SKILL:if(currentState<0){if(-currentState>help.decrease*howMuch*1/coeff)
currentState+=help.decrease*howMuch*1/coeff;else
currentState=0;}else{if(currentState+skill.increase*howMuch*1/coeff<10)
currentState+=skill.increase*howMuch*1/coeff;else
currentState=10;}}
return currentState;},get:function(what){return what===SKILL?(currentState>0?currentState:0):(what===HELP?(currentState<0?-currentState:0):currentState);}};return that;})(),HELP=0,SKILL=1;(function(undefined){var funcPointer={log:Math.log,pow:Math.pow},isNumber=Number.isNumber,isFloat=function(n){return/\./.test(n);};Number.prototype.toFract=function(){var num=this.toString();if(/e\+/.test(num))return[this,1];var precision=/\d*(\.\d*)?(e-\d*)?/.exec(num),divident,divisor,greatestDivisor;precision=(precision[1]||" ").length-1-
Number((precision[2]||"").substr(1));greatestDivisor=Math.gCommDiv((divisor=precision.exp10()),(divident=this*divisor));return[divident/greatestDivisor,divisor/greatestDivisor]};Number.prototype.pow=function(pow){return pow!==undefined?Math.pow(this,pow):Math.pow(this);};Number.prototype.log=function(base){return base!==undefined?Math.log(base,this):Math.ln(this);};Number.prototype.log10=function(){return Math.log10(this);};Number.prototype.exp10=function(x){return x!==undefined&&isNumber(x)!==true?NaN:(x===undefined?Math.exp10(this):this*Math.exp10(x));};Number.prototype.ln=function(){return Math.ln(this);};Number.prototype.fac=function(){return Math.fac(this);};Number.prototype.comb=function(k){return Math.comb(this,k);};Number.prototype.rt=function(index){return index!==undefined?Math.rt(this,index):Math.sqrt(this);};Number.prototype.sqrt=function(){return Math.sqrt(this);};Number.prototype.abs=function(){return Math.abs(this);};Number.prototype.round=function(){return Math.round(this);};Number.prototype.floor=function(){return Math.floor(this);};Number.prototype.ceil=function(){return Math.ceil(this);};Number.prototype.sin=function(){return Math.sin(this);};Number.prototype.asin=function(){return Math.asin(this);};Number.prototype.cos=function(){return Math.cos(this);};Number.prototype.acos=function(){return Math.acos(this);};Number.prototype.tan=function(){return Math.tan(this);};Number.prototype.atan=function(){return Math.atan(this);};Number.prototype.cotg=function(){return Math.cotg(this);};Number.prototype.acotg=function(){return Math.acotg(this);};Number.prototype.sec=function(){return Math.sec(this);};Number.prototype.asec=function(){return Math.asec(this);};Number.prototype.csc=function(){return Math.csc(this);};Number.prototype.acsc=function(){return Math.acsc(this);};Number.prototype.sinh=function(){return Math.sinh(this);};Number.prototype.asinh=function(){return Math.asinh(this);};Number.prototype.cosh=function(){return Math.cosh(this);};Number.prototype.acosh=function(){return Math.acosh(this);};Number.prototype.tanh=function(){return Math.tanh(this);};Number.prototype.atanh=function(){return Math.atanh(this);};Number.prototype.coth=function(){return Math.coth(this);};Number.prototype.acoth=function(){return Math.acoth(this);};Number.prototype.sech=function(){return Math.sech(this);};Number.prototype.asech=function(){return Math.asech(this);};Number.prototype.csch=function(){return Math.csch(this);};Number.prototype.acsch=function(){return Math.acsch(this);};Number.prototype.degToRad=function(){return this/180*Math.PI;};Number.prototype.degToGrad=function(){return this/0.9;};Number.prototype.radToDeg=function(){return this*180/Math.PI;};Number.prototype.radToGrad=function(){return this/Math.PI*200;};Number.prototype.gradToDeg=function(){return this*0.9;};Number.prototype.gradToRad=function(){return this*Math.PI/200;};Number.prototype.degAdjust=function(){var angle=this;if(angle<0)angle=angle%360+360;if(angle>=360)angle%=360;return angle;};Number.prototype.radAdjust=function(){var angle=this;if(angle<0)angle=angle%(2*Math.PI)+2*Math.PI;if(angle>=2*Math.PI)angle%=2*Math.PI;return angle;};Number.prototype.gradAdjust=function(){var angle=this;if(angle<0)angle=angle%400+400;if(angle>=400)angle%=400;return angle;};Math.rt=function(){switch(arguments.length){case 0:return NaN;case 1:return isNumber(arguments[0])?arguments[0].sqrt():NaN;default:return isNumber(arguments[0])&&isNumber(arguments[1])?arguments[0].pow(1/arguments[1]):NaN;}};Math.fib=function(n){var g=(1+Math.sqrt(5))/2;return Math.round((Math.pow(g,n)-Math.pow(-g,-n))/Math.sqrt(5));};Math.ln=funcPointer.log;Math.cotg=function(x){return x!==undefined?x.cos()/x.sin():NaN;};Math.acotg=function(x){return x!==undefined?Math.PI/2-x.atan():NaN;};Math.sec=function(x){return x!==undefined?1/x.cos():NaN;};Math.asec=function(x){return x!==undefined?x.acos(1/x):NaN;};Math.csc=function(x){return x!==undefined?1/x.sin():NaN;};Math.acsc=function(x){return x!==undefined?x.asin(1/x):NaN;};Math.sinh=function(x){return x!==undefined?(Math.E.pow(x)-Math.E.pow(-x))/2:NaN;};Math.asinh=function(x){return x!==undefined?(x+(x.pow(2)+1).sqrt()).ln():NaN;};Math.cosh=function(x){return x!==undefined?(Math.E.pow(x)+Math.E.pow(-x))/2:NaN;};Math.acosh=function(x){return x!==undefined?(x+(x.pow()-1).sqrt()).ln():NaN;};Math.tanh=function(x){return x!==undefined?x.sinh()/x.cosh():NaN;};Math.atanh=function(x){return x!==undefined?0.5*((1+x)/(1-x)).ln():NaN;};Math.coth=function(x){return x!==undefined?x.cosh()/x.sinh():NaN;};Math.acoth=function(x){return x!==undefined?0.5*((x+1)/(x-1)).ln():NaN;};Math.sech=function(x){return x!==undefined?1/x.cosh():NaN;};Math.asech=function(x){return x!==undefined?((1+(1-x.pow()).sqrt())/x).ln():NaN;};Math.csch=function(x){return x!==undefined?1/x.sinh():NaN;};Math.acsch=function(x){return x!==undefined?(1/x+(1+x.pow()).sqrt()/x.abs()).ln():NaN;};Math.pow=function(){switch(arguments.length){case 0:return NaN;case 1:if(isNumber(arguments[0]))
return funcPointer.pow(arguments[0],2);else throw err.type;default:return isNumber(arguments[0])&&isNumber(arguments[1])?funcPointer.pow(arguments[0],arguments[1]):NaN;}};Math.log=function(){switch(arguments.length){case 0:return NaN;case 1:return isNumber(arguments[0])?arguments[0].ln():NaN;default:return isNumber(arguments[0])&&isNumber(arguments[1])?arguments[1].ln()/arguments[0].ln():NaN;}};Math.log10=function(x){if(x===undefined||!isNumber(x))return NaN;return Math.log(10,x);};Math.exp10=function(x){if(x===undefined||!isNumber(x))return NaN;return(10).pow(x);};Math.fac=function(n){if(n===undefined||!isNumber(n)||isFloat(n)||n==Infinity||n<0)return NaN;var result=1;while(n>0)result*=n--;return result;};Math.med=function(){if(arguments.length<2)return NaN;return arguments.length&1?arguments[(arguments.length/2).floor()]:(arguments[arguments.length/2]+
arguments[arguments.length/2-1])/2;};Math.sum=function(sum,index){if(arguments.length===0||!Array.isArray(sum))return NaN;var result=0,length=sum.length;index=isNumber(index)?index:0;if(index>=length)return 0;do{result+=sum[index];}while(++index<length)
return result;};Math.avg=function(){if(arguments.length<1)return NaN;var sum=0,count=0,length=arguments.length;do{sum+=arguments[count];}while(++count<length)
return sum/count;};Math.avgVar=function(){if(arguments.length<2)return NaN;var sum=0,count=0,length=arguments.length;do{sum+=arguments[count].pow();}while(++count<length)
return sum/length-Math.avg.apply(Math,arguments).pow();};Math.avgOffset=function(){return(Math.avgVar.apply(Math,arguments)).sqrt()/Math.avg.apply(Math,arguments);};Math.gAvg=function(){if(arguments.length<2)return NaN;var sum=1,count=1,length=arguments.length;do{sum*=arguments[count]/arguments[count-1];}while(++count<length)
return sum.rt(arguments.length);};Math.hAvg=function(){if(arguments.length<2)return NaN;var sum=0,count=0,length=arguments.length;do{sum+=1/arguments[count];}while(++count<length)
return 1/(1/arguments.length*sum);};Math.lim=function(f,x,prec){if(x===undefined||f===undefined||!isNumber(x)||!(f instanceof Function)||x===-Infinity||x===Infinity||(prec!==undefined&&(!isNumber(prec)||(prec<=0))))
return NaN;if(prec===undefined)
prec=1;var dx=(2).pow(-prec+1),tans=[f.tanLine(x+dx,prec+1),f.tanLine(x-dx,prec+1)],points=[tans[0]instanceof Function?tans[0](x):NaN,tans[1]instanceof Function?tans[1](x):NaN],results=[];if(!isNaN(points[0]))results.push(points[0]);if(!isNaN(points[1]))results.push(points[1]);return results.avg();};Math.diff=function(f,x,diffClass,prec){if(x===undefined||f===undefined||!isNumber(x)||!(f instanceof Function)||(diffClass!==undefined&&(!isNumber(diffClass)||(diffClass<=0)))||(prec!==undefined&&(!isNumber(prec)||(prec<=0))))return NaN;if(diffClass===undefined)
diffClass=1;else if(diffClass>1){var diff=arguments.callee;return diff(function(x,prec){return diff(f,x,1,prec);},x,diffClass-1,prec);}
if(prec===undefined)
prec=1;else prec=(2).pow(-prec+1);return Math.avg(f(x,prec)-f(x-prec,prec),-(f(x,prec)-f(x+prec,prec)))*1/prec;};Math.integrate=function(f,a,b,prec,scale){if(a===undefined||b===undefined||f===undefined||!isNumber(a)||!isNumber(b)||!(f instanceof Function)||a>b||(prec!==undefined&&(!isNumber(prec)||(prec<=0))))return NaN;if(prec===undefined)
prec=1;if(scale===undefined)
scale=true;var r=(scale?(b-a).pow():(b-a))*(2).pow(prec-1),h=(b-a)/r,result=0,x=a;do{result+=h*(f(x)+f(x+=h))/2;}while(x<b)
return result.abs();};Math.integRot=function(f,a,b,prec,scale){return f instanceof Function!==false?Math.PI*Math.integrate(function(x){return f(x).pow();},a,b,prec,scale):NaN;};Math.comb=function(n,k){if(n===undefined||k===undefined||!isNumber(n)||!isNumber(k)||n<0||k<0||k>n)
return NaN;if(n===k||k===0)
return 1;if(k===1)
return n;return n.fac()/(k.fac()*(n-k).fac());};Math.gCommDiv=function(a,b){if(a===undefined||b===undefined||!isNumber(a)||!isNumber(b))
return NaN;var length;if((length=arguments.length-1)>1){var results=[];for(var index=0;index<length;index++){results.push(Math.gCommDiv(arguments[index],arguments[index+1]));}
return Math.gCommDiv.apply(Math,results);}else{a=a.abs();b=b.abs();var divident=Math.max(a,b),divisor=Math.min(a,b),quotient=(divident/divisor).floor(),remainder=divident%divisor;while(remainder>0){divident=divisor;divisor=remainder;remainder=divident%divisor;}
return divisor;}};Math.lCommMul=function(a,b){if(a===undefined||b===undefined||!isNumber(a)||!isNumber(b))
return NaN;var length;if((length=arguments.length-1)>1){var results=[];for(var index=0;index<length;index++){results.push(Math.lCommMul(arguments[index],arguments[index+1]));}
return Math.lCommMul.apply(Math,results);}else return(a*b).abs()/Math.gCommDiv(a,b);};Array.prototype.avg=function(){return Math.avg.apply(Math,this);};Array.prototype.avgVar=function(){return Math.avgVar.apply(Math,this);};Array.prototype.avgOffset=function(){return Math.avgOffset.apply(Math,this);};Array.prototype.gAvg=function(){return Math.gAvg.apply(Math,this);};Array.prototype.hAvg=function(){return Math.hAvg.apply(Math,this);};Array.prototype.med=function(){return Math.med.apply(Math,this);};Array.prototype.min=function(){return Math.min.apply(Math,this);};Array.prototype.max=function(){return Math.max.apply(Math,this);};Array.prototype.sum=function(index){return Math.sum(this,index);};Function.prototype.d=function(diffClass){if((diffClass!==undefined&&(!isNumber(diffClass)||(diffClass<=0))))return NaN;if(diffClass===undefined)
diffClass=1;var f=this;return function(x,prec){return Math.diff(f,x,diffClass,prec);};};Function.prototype.diff=function(x,diffClass,prec){return Math.diff(this,x,diffClass,prec);};Function.prototype.lim=function(x,prec){return Math.lim(this,x,prec);};Function.prototype.tanLine=function(x,prec){if(x===undefined||!isNumber(x)||x===Infinity||x===-Infinity||(prec!==undefined&&(!isNumber(prec)||(prec<=0))))return NaN;if(prec===undefined)
prec=1;var y=this(x),k=this.diff(x,1,prec),q=y-k*x;return function(x){return k*x+q;};};Function.prototype.integrate=function(a,b,prec,scale){return Math.integrate(this,a,b,prec,scale);};Function.prototype.integRot=function(a,b,prec,scale){return Math.integRot(this,a,b,prec,scale);};})();var Skin=(function(){var style;var Skin=function(style){this.style=style;}
Skin.Transition=function(oldSkin,newSkin,duration,callback){var rules,ticks=Math.round(duration/(1000/Graphics.FramesPerSecond)),colorTransitions={originalGridColor:new colorTransition(oldSkin.style.originalGridColor,newSkin.style.originalGridColor),originalBackgroundColor:new colorTransition(oldSkin.style.originalBackgroundColor,newSkin.style.originalBackgroundColor),originalCellColor:new colorTransition(oldSkin.style.originalCellColor,newSkin.style.originalCellColor),originalHeadColor:new colorTransition(oldSkin.style.originalHeadColor,newSkin.style.originalHeadColor),originalBodyColor:new colorTransition(oldSkin.style.originalBodyColor,newSkin.style.originalBodyColor),foodColors:[new colorTransition(oldSkin.style.foodColors[0],newSkin.style.foodColors[0]),new colorTransition(oldSkin.style.foodColors[1],newSkin.style.foodColors[1]),new colorTransition(oldSkin.style.foodColors[2],newSkin.style.foodColors[2]),new colorTransition(oldSkin.style.foodColors[3],newSkin.style.foodColors[3])]};veilColor=newSkin.style.veilColor;originalGridColor=newSkin.style.originalGridColor;originalBackgroundColor=newSkin.style.originalBackgroundColor;originalCellColor=newSkin.style.originalCellColor;speedColors=newSkin.style.speedColors;foodColors=newSkin.style.foodColors;scoreColors=newSkin.style.scoreColors;starsImage=newSkin.style.starsImage;GUI.updateColors();stars.forEach(function(star){star.src=starsImage[SVGSupport?1:0];});for(var index=1;index<=ticks;index++){(function(index){setTimeout(function(){while(style.hasChildNodes()){style.removeChild(style.firstChild);}
var rules=document.createTextNode("body {background-color: "+colorTransitions.originalBackgroundColor.calc(index/ticks)+"}"+".gameField {background-color: "+colorTransitions.originalGridColor.calc(index/ticks)+";}"+".nic {background-color: "+colorTransitions.originalCellColor.calc(index/ticks)+"}"+"."+food+" {background-color: "+colorTransitions.foodColors[foodColorIndexes[food]].calc(index/ticks)+"}"+"."+bonusFood+" {background-color: "+colorTransitions.foodColors[foodColorIndexes[bonusFood]].calc(index/ticks)+"}"+"."+superFood+" {background-color: "+colorTransitions.foodColors[foodColorIndexes[superFood]].calc(index/ticks)+"}"+"."+legendFood+" {background-color: "+colorTransitions.foodColors[foodColorIndexes[legendFood]].calc(index/ticks)+"}"+".hlava {background-color: "+colorTransitions.originalHeadColor.calc(index/ticks)+"}"+".telo {background-color: "+colorTransitions.originalBodyColor.calc(index/ticks)+"}");if(style.styleSheet)
style.styleSheet.cssText=rules.nodeValue;else
style.appendChild(rules);if(index===ticks&&callback instanceof Function)
callback();},index*(1000/Graphics.FramesPerSecond));})(index);}}
Skin.prototype.ApplyTextVariables=function(){gridColors=this.style.gridColors;textColors=this.style.textColors;sTextColors=this.style.sTextColors;}
Skin.prototype.Apply=function(){var append,rules;scoreColors=this.style.scoreColors;starsImage=this.style.starsImage;veilColor=this.style.veilColor;originalGridColor=this.style.originalGridColor;originalBackgroundColor=this.style.originalBackgroundColor;originalCellColor=this.style.originalCellColor;gridColors=this.style.gridColors;textColors=this.style.textColors;speedColors=this.style.speedColors;sTextColors=this.style.sTextColors;foodColors=this.style.foodColors;GUI.updateColors();stars.forEach(function(star){star.src=starsImage[SVGSupport?1:0];});if(style===undefined){append=true;style=document.createElement("style");style.type="text/css";}else{while(style.hasChildNodes()){style.removeChild(style.firstChild);}}
rules=document.createTextNode("body {background-color: "+originalBackgroundColor+"}"+".gameField {background-color: "+originalGridColor+";}"+".nic {background-color: "+originalCellColor+"}"+"."+food+" {background-color: "+foodColors[foodColorIndexes[food]]+"}"+"."+bonusFood+" {background-color: "+foodColors[foodColorIndexes[bonusFood]]+"}"+"."+superFood+" {background-color: "+foodColors[foodColorIndexes[superFood]]+"}"+"."+legendFood+" {background-color: "+foodColors[foodColorIndexes[legendFood]]+"}"+".hlava {background-color: "+this.style.originalHeadColor+"}"+".telo {background-color: "+this.style.originalBodyColor+"}");if(style.styleSheet)
style.styleSheet.cssText=rules.nodeValue;else
style.appendChild(rules);if(append===true)
Head.appendChild(style);}
return Skin;})()
var Buffer=(function(){var that;return(that={_private:{snake:undefined,buffered:[],rewrite:false,active:false,move:function(){if(that._private.active){that._private.snake.changeDirection(that._private.buffered.shift());that._private.active=!!that._private.buffered.length;that._private.rewrite=true;}}},clear:function(){this._private.buffered.length=0;this._private.rewrite=false;this._private.active=false;},hit:function(keyCode){if(this._private.rewrite){this._private.buffered.length=1;this._private.buffered[0]=keyCode;this._private.rewrite=false;}
else
this._private.buffered.push(keyCode);this._private.active=true;},register:function(snake){this._private.snake=snake;field.movement.addFCCallback(this._private.move);},unregister:function(){delete this._private.snake;this.clear();field.movement.removeFCCallback(this._private.move);}});})();var Day=new Skin({starsImage:["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A /wD/oL2nkwAAAAlwSFlzAACNZgAAjWYBB0M1IwAAAAd0SU1FB9oIBAoMHHVA3+oAAAExSURBVBjT hY27SgNRAETP3YdZ8rBRi6CkkpBgrSIYIVgICn6GIFYBC7cUi6AWNuI32Is/YGFjQFQ0hQbEREEk MY/dzSabu9cionYODMMMBwb+yN0Bp0DO3TPP+E/ecfyid51RzVX0v7vm2r/F2WRSX5zKicwYZobz nycbDDVgxSmQ1lLRLJaxrqXHwVdKX5te9lLvp+rTKytXPgnv0Lo0t+cXAPBDlDNAuCF0JXQBP1SD m2og6oC1H3kY2ZrLKicYQp4ELwQ3ZHBXRb42ZjXLht5ubyY4KdVoSehIaA8dvjSRtUY+fkDJiBUB UG7L14UbgiOhO0wRAJKyY4MG0NnAFBOJJG2p1FsHeV9DBCgRi4LBaLz4DYo4CWGYBFeV236pkg+e G8l++fFIftQREX0J4Av08Y4EOdL+NQAAAABJRU5ErkJggg==","data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+DQ0KPCEtLSBDcmVhdGVkIHdpdGggSW5rc2NhcGUgKGh0dHA6Ly93d3cuaW5rc2NhcGUub3JnLykgLS0+ DQ0KPHN2ZyBpZD0ic3ZnMjgzNiIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhl aWdodD0iNjRweCIgd2lkdGg9IjY0cHgiIHZlcnNpb249IjEuMSIgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyI+DQ0K IDxkZWZzIGlkPSJkZWZzMjgzOCI+DQ0KICA8bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhckdyYWRpZW50MzgwMiIgeTI9IjU1LjUyNSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgyPSIz NC45MTEiIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMS4xMyAwIDAgMS4xMjUzIC0zLjQ3NDMgLTMuOTA4OSkiIHkxPSIzMi4wNyIgeDE9IjUuNDY0OSI+DQ0KICAgPHN0b3AgaWQ9InN0b3AyODgy IiBzdG9wLWNvbG9yPSIjZmNmZjAwIiBvZmZzZXQ9IjAiLz4NDQogICA8c3RvcCBpZD0ic3RvcDI4ODQiIHN0b3AtY29sb3I9IiNmZmE0MDAiIG9mZnNldD0iMSIvPg0NCiAgPC9saW5lYXJHcmFkaWVu dD4NDQogIDxyYWRpYWxHcmFkaWVudCBpZD0icmFkaWFsR3JhZGllbnQzODI4IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY3k9IjMxLjg0NCIgY3g9IjI3LjY2NyIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCguMDQ5NzExIC43OTQ5MSAtMS4wNzgxIC4wNjY4NjIgNjcuNTk4IDEzLjE3 MykiIHI9IjI2Ljc2OSI+DQ0KICAgPHN0b3AgaWQ9InN0b3AzODIyIiBzdG9wLWNvbG9yPSIjMDAwIiBvZmZzZXQ9IjAiLz4NDQogICA8c3RvcCBpZD0ic3RvcDM4MjQiIHN0b3AtY29sb3I9IiMwMDAi IHN0b3Atb3BhY2l0eT0iMCIgb2Zmc2V0PSIxIi8+DQ0KICA8L3JhZGlhbEdyYWRpZW50Pg0NCiA8L2RlZnM+DQ0KIDxtZXRhZGF0YSBpZD0ibWV0YWRhdGEyODQxIj4NDQogIDxyZGY6UkRGPg0NCiAg IDxjYzpXb3JrIHJkZjphYm91dD0iIj4NDQogICAgPGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+DQ0KICAgIDxkYzp0eXBlIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiLz4NDQogICA8L2NjOldvcms+DQ0KICA8L3JkZjpSREY+DQ0K IDwvbWV0YWRhdGE+DQ0KIDxnIGlkPSJsYXllcjEiPg0NCiAgPHBhdGggaWQ9InBhdGgyODQ4IiBmaWxsPSIjZTM2YzAwIiB0cmFuc2Zvcm09Im1hdHJpeCgyLjQ0NjcgMCAwIDIuNDUzMiAtNDYuMTEg LTQ2LjE1MSkiIHN0cm9rZS1kYXNoYXJyYXk9Im5vbmUiIHN0cm9rZS1taXRlcmxpbWl0PSI0IiBzdHJva2Utd2lkdGg9Ii4wNDI5NDIiIGQ9Im0xOS4yNzMgMjguNzI3IDguODYxNC0xLjE0MTkgNC4w ODMtNy45NDcyIDMuODI0NCA4LjA3NDggOC44MiAxLjQyNzMtNi40OTc4IDYuMTMyNSAxLjM2ODEgOC44MjkzLTcuODQwMy00LjI4NDgtNy45NzQ0IDQuMDI5NSAxLjY1MjMtOC43ODA2eiIvPg0NCiAg PHBhdGggaWQ9InBhdGgyODUwIiBkPSJtNDEuMDI2IDU1LjU2OWMtNC44ODQ3LTIuNjYwNi04Ljk2NDUtNC44Mzc1LTkuMDY2My00LjgzNzUtLjEwMTczIDAtNC4yNjY4IDIuMDYyNi05LjI1NTcgNC41ODM2cy05LjExODEgNC41MzY1LTkuMTc1OSA0LjQ3OWMtLjA1NzgxLS4wNTc1OC43NDgzOS00LjYz NCAxLjc5MTYtMTAuMTdsMS44OTYtMTAuMDY1LTcuNDE3OC03LjM4OWMtNC41MzE3LTQuNTE0LTcuMjg5Mi03LjM4OS03LjA4NjktNy4zODkuNzY1MDcgMCAyMC40MTQtMi41OTE5IDIwLjUyLTIuNzA2 OC4wNjM5MS0uMDY5MjEgMi4yMDI5LTQuMTc2IDQuNzUzMy05LjEyNjJzNC42OTIyLTkuMDAwNCA0Ljc1OTUtOS4wMDA0IDIuMTAzNCA0LjE3MiA0LjUyNDcgOS4yNzExbDQuNDAyMyA5LjI3MTEgMTAu MjIyIDEuNjQxNGM1LjYyMjEuOTAyNzYgMTAuMiAxLjcwNDQgMTAuMTc0IDEuNzgxNC0uMDI2NDcuMDc3MDMtMy4zOTI2IDMuMjgzMi03LjQ4MDIgNy4xMjQ5LTYuOTQ0NSA2LjUyNjYtNy40MjgxIDcu MDIxNC03LjM3MTYgNy41NDIxLjAxNjA4LjE0ODIzLjE4MzcyIDEuMjY3Mi40NDI5OCAyLjk2NDcuMjc2ODQgMS44MTI2LjY1ODE1IDQuMjg0OSAxLjA3MSA2LjkzOTYgMS41MTM2IDkuNzMzNCAxLjU0MDUgOS45MzY0IDEuMzE1OSA5LjkyNzYtLjA3NTctLjAwMjktNC4xMzQyLTIuMTgyMi05LjAxODkt NC44NDI4eiIgZmlsbC1ydWxlPSJub256ZXJvIiBzdHJva2U9InVybCgjcmFkaWFsR3JhZGllbnQzODI4KSIgc3Ryb2tlLXdpZHRoPSIxLjEyNzYiIGZpbGw9InVybCgjbGluZWFyR3JhZGllbnQzODAy KSIvPg0NCiA8L2c+DQ0KPC9zdmc+DQ0K"],veilColor:"#FFFFFF",originalGridColor:"#EAEAEA",originalBackgroundColor:"#FFFFFF",originalHeadColor:"#000000",originalBodyColor:"#666666",originalCellColor:"#FFFFFF",gridColors:[["#D0D0D0","#F8F8F8"],["#60A800","#C8FF95"],["#B7BC23","#FFFFB9"],["#DF3500","#FFAEAE"],["#0088FF","#BCDFFF"],["#A92FFF","#D09DFF"],["#FF9C2E","#FFDEBD"],["#FF512E","#FFB693"]],textColors:[["#0A3700","#7EDB4B","#FFFFFF","#000000"],["#414100","#E9DF3C","#FFFFFF","#000000"],["#410000","#E7431E","#FFFFFF","#000000"],["#48003C","#C755FC","#FFFFFF","#000000"],["#001D58","#AFD4F9","#FFFFFF","#000000"],["#FF9606","#FFEDBF","#000000","#000000"],["#AA0000","#FF9C2E","#FFFFFF","#000000"]],speedColors:[["#276300","#E3FFD8"],["#0057A4","#CEEDFF"],["#900000","#FFD5AE"]],scoreColors:[["#303030","#A0A0A0"],["#276300","#E3FFD8"],["#E9DF3C","#414100"],["#900000","#FFD5AE"],["#761DB8","#F0D4FE"],["#D56906","#FFEDBF"],["#900000","#FFDBB2"]],sTextColors:[["#000000","#FFFFFF"],["#3A7000","#FFFFFF"],["#9E1DB6","#FFFFFF"],["#FF9606","#000000"],["#326CBC","#FFFFFF"],["#808080","#A0A0A0"]],foodColors:["#FFA52E","#AF1BFF","#60A800","#BBBBBB"]}),Night=new Skin({starsImage:["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A /wD/oL2nkwAAAAlwSFlzAACNZgAAjWYBB0M1IwAAAAd0SU1FB9sDBhEoCJiEjJ8AAAFISURBVBjT hY2xasJQGEa/mDRE2oYsCmLJWJCCW4eCFjoVl4JTfQQfIRkkk+hWcHF0cCt0Kn2BDk6ZOjSI1UAH h5DiYLz3v4mXdCmtW8/2HT44wAE7B+j3+83RaPSM/5hMJq++7+fdblc99IWd+zc8z6vW6/Wmbduw bfvlt+QCynA4vJVSnpfL5Zqu63etVquaZVk+n8/larV62m63ARF9aJZleZ1O5woA0jQF5xxCCKVU Kmmmad5nWZYvFotM+QLwOB6/t9vtGuccRAQhBIQQICIsl0tEUXSpGS4wnU4vFEX5bDQaZ2magohA RIjjGFEU3TiO4xeOB8BsNsuTJFGJCIwxcM7BGMN+v4eUMkhcoAAAvV7vyLKsCmMsj+MYYRhCSpkX i0WoqmqeDH6OhmGcapqGIAjegiC4Wa/XlTAMHzabDXRdvwaAbz0mpub3U0Q0AAAAAElFTkSuQmCC","data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+DQ0K PCEtLSBDcmVhdGVkIHdpdGggSW5rc2NhcGUgKGh0dHA6Ly93d3cuaW5rc2NhcGUub3JnLykgLS0+ DQ0KPHN2ZyBpZD0ic3ZnMjgzNiIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAy LzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhl aWdodD0iNjRweCIgd2lkdGg9IjY0cHgiIHZlcnNpb249IjEuMSIgeG1sbnM6Y2M9Imh0dHA6Ly9j cmVhdGl2ZWNvbW1vbnMub3JnL25zIyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5 OTkveGxpbmsiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyI+DQ0K IDxkZWZzIGlkPSJkZWZzMjgzOCI+DQ0KICA8bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhckdyYWRp ZW50MzgwMi02NTgiIHkyPSI1NS41MjUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB5 MT0iMzIuMDciIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMS4xMyAwIDAgMS4xMjUzIC0zLjQ3 NDMgLTMuOTA4OSkiIHgyPSIzNC45MTEiIHgxPSI1LjQ2NDkiPg0NCiAgIDxzdG9wIGlkPSJzdG9w NDAyOSIgc3RvcC1jb2xvcj0iI2UxZTFlMSIgb2Zmc2V0PSIwIi8+DQ0KICAgPHN0b3AgaWQ9InN0 b3A0MDMxIiBzdG9wLWNvbG9yPSIjYWRhZGFkIiBvZmZzZXQ9IjEiLz4NDQogIDwvbGluZWFyR3Jh ZGllbnQ+DQ0KICA8cmFkaWFsR3JhZGllbnQgaWQ9InJhZGlhbEdyYWRpZW50MzgyOC02MjAiIGN4 PSIyNy42NjciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBjeT0iMzEuODQ0IiByPSIy Ni43NjkiIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoLjA0OTcxMSAuNzk0OTEgLTEuMDc4MSAu MDY2ODYyIDY3LjU5OCAxMy4xNzMpIj4NDQogICA8c3RvcCBpZD0ic3RvcDQwMzUiIHN0b3AtY29s b3I9IiMwMDAiIG9mZnNldD0iMCIvPg0NCiAgIDxzdG9wIGlkPSJzdG9wNDAzNyIgc3RvcC1jb2xv cj0iIzAwMCIgc3RvcC1vcGFjaXR5PSIwIiBvZmZzZXQ9IjEiLz4NDQogIDwvcmFkaWFsR3JhZGll bnQ+DQ0KIDwvZGVmcz4NDQogPG1ldGFkYXRhIGlkPSJtZXRhZGF0YTI4NDEiPg0NCiAgPHJkZjpS REY+DQ0KICAgPGNjOldvcmsgcmRmOmFib3V0PSIiPg0NCiAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2 Zyt4bWw8L2RjOmZvcm1hdD4NDQogICAgPGRjOnR5cGUgcmRmOnJlc291cmNlPSJodHRwOi8vcHVy bC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIvPg0NCiAgICA8ZGM6dGl0bGUvPg0NCiAgIDwv Y2M6V29yaz4NDQogIDwvcmRmOlJERj4NDQogPC9tZXRhZGF0YT4NDQogPGcgaWQ9ImxheWVyMSI+ DQ0KICA8cGF0aCBpZD0icGF0aDI4NDgiIGQ9Im0xOS4yNzMgMjguNzI3IDguODYxNC0xLjE0MTkg NC4wODMtNy45NDcyIDMuODI0NCA4LjA3NDggOC44MiAxLjQyNzMtNi40OTc4IDYuMTMyNSAxLjM2 ODEgOC44MjkzLTcuODQwMy00LjI4NDgtNy45NzQ0IDQuMDI5NSAxLjY1MjMtOC43ODA2eiIgdHJh bnNmb3JtPSJtYXRyaXgoMi40NDY3IDAgMCAyLjQ1MzIgLTQ2LjExIC00Ni4xNTEpIiBzdHJva2Ut ZGFzaGFycmF5PSJub25lIiBzdHJva2UtbWl0ZXJsaW1pdD0iNCIgc3Ryb2tlLXdpZHRoPSIuMDQy OTQyIiBmaWxsPSIjODM4MzgzIi8+DQ0KICA8cGF0aCBpZD0icGF0aDI4NTAiIGQ9Im00MS4wMjYg NTUuNTY5Yy00Ljg4NDctMi42NjA2LTguOTY0NS00LjgzNzUtOS4wNjYzLTQuODM3NS0uMTAxNzMg MC00LjI2NjggMi4wNjI2LTkuMjU1NyA0LjU4MzZzLTkuMTE4MSA0LjUzNjUtOS4xNzU5IDQuNDc5 Yy0uMDU3ODEtLjA1NzU4Ljc0ODM5LTQuNjM0IDEuNzkxNi0xMC4xN2wxLjg5Ni0xMC4wNjUtNy40 MTc4LTcuMzg5Yy00LjUzMTctNC41MTQtNy4yODkyLTcuMzg5LTcuMDg2OS03LjM4OS43NjUwNyAw IDIwLjQxNC0yLjU5MTkgMjAuNTItMi43MDY4LjA2MzkxLS4wNjkyMSAyLjIwMjktNC4xNzYgNC43 NTMzLTkuMTI2MnM0LjY5MjItOS4wMDA0IDQuNzU5NS05LjAwMDQgMi4xMDM0IDQuMTcyIDQuNTI0 NyA5LjI3MTFsNC40MDIzIDkuMjcxMSAxMC4yMjIgMS42NDE0YzUuNjIyMS45MDI3NiAxMC4yIDEu NzA0NCAxMC4xNzQgMS43ODE0LS4wMjY0Ny4wNzcwMy0zLjM5MjYgMy4yODMyLTcuNDgwMiA3LjEy NDktNi45NDQ1IDYuNTI2Ni03LjQyODEgNy4wMjE0LTcuMzcxNiA3LjU0MjEuMDE2MDguMTQ4MjMu MTgzNzIgMS4yNjcyLjQ0Mjk4IDIuOTY0Ny4yNzY4NCAxLjgxMjYuNjU4MTUgNC4yODQ5IDEuMDcx IDYuOTM5NiAxLjUxMzYgOS43MzM0IDEuNTQwNSA5LjkzNjQgMS4zMTU5IDkuOTI3Ni0uMDc1Ny0u MDAyOS00LjEzNDItMi4xODIyLTkuMDE4OS00Ljg0Mjh6IiBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0 cm9rZT0idXJsKCNyYWRpYWxHcmFkaWVudDM4MjgtNjIwKSIgc3Ryb2tlLXdpZHRoPSIxLjEyNzYi IGZpbGw9InVybCgjbGluZWFyR3JhZGllbnQzODAyLTY1OCkiLz4NDQogPC9nPg0NCjwvc3ZnPg0N Cg=="],veilColor:"#000000",originalGridColor:"#222222",originalBackgroundColor:"#000000",originalHeadColor:"#666666",originalBodyColor:"#3A3A3A",originalCellColor:"#000000",gridColors:[["#2E2E2E","#0B0B0B"],["#1F470B","#396A1D"],["#504900","#7B7616"],["#570D00","#841700"],["#003466","#324C61"],["#632FAA","#41126C"],["#502300","#804200"],["#5C5C46","#333324"]],textColors:[["#0A3700","#777777","#777777","#222222"],["#414100","#8E9090","#777777","#222222"],["#A44C4C","#8E9090","#B50000","#222222"],["#A471DA","#AEAEAE","#777777","#222222"],["#2B4257","#8E9090","#777777","#40698B"],["#C78464","#8E9090","#FF9C42","#222222"],["#0E0E0E","#77775E","#77775E","#222222"]],speedColors:[["#4F7548","#31851C"],["#637A90","#B3B3B3"],["#A44C4C","#AE6D00"]],scoreColors:[["#6C6C6C","#222222"],["#4F7548","#31851C"],["#949450","#494A28"],["#A44C4C","#AE6D00"],["#8869C3","#713F7B"],["#C78464","#FF9C42"],["#BCBC8C","#303100"]],sTextColors:[["#8C8C8C","#222222"],["#3A7000","#222222"],["#9E1DB6","#222222"],["#C78464","#FF9C42"],["#637A90","#515F8C"],["#6C6C6C","#222222"]],foodColors:["#944B00","#812FD2","#3A7000","#555555"]});return Screen;})();