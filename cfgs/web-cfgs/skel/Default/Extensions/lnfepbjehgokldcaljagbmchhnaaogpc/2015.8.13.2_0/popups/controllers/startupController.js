/*! CKP - KeePass integration for Chromeâ„¢, Copyright 2015 Steven Campbell
*/
"use strict";function StartupController($scope,$location,settings,optionsLink,passwordFileStoreRegistry){$scope.ready=!1,settings.getCurrentDatabaseChoice().then(function(info){if(!info){var readyPromises=[];return passwordFileStoreRegistry.listFileManagers("listDatabases").forEach(function(provider){readyPromises.push(provider.listDatabases())}),Promise.all(readyPromises).then(function(filesArrays){var availableFiles=filesArrays.reduce(function(prev,curr){return prev.concat(curr)});availableFiles.length?$location.path("/choose-file"):$scope.ready=!0})}$location.path("/enter-password/"+info.providerKey+"/"+encodeURIComponent(info.passwordFile.title))}).then(function(){$scope.$apply()}),$scope.openOptionsPage=function(){optionsLink.go()}}